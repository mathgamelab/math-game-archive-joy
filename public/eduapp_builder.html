<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduApp Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    @keyframes slide-in-from-right {
      from {
        opacity: 0;
        transform: translateX(1rem);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    @keyframes slide-in-from-bottom {
      from {
        opacity: 0;
        transform: translateY(0.5rem);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-in {
      animation: slide-in-from-right 0.3s ease-out;
    }
    .slide-in-from-bottom-2 {
      animation: slide-in-from-bottom 0.2s ease-out;
    }
    .slide-in-from-bottom-5 {
      animation: slide-in-from-bottom 0.5s ease-out;
    }
    @keyframes lightbulb-twinkle {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(255, 239, 0, 0), 0 0 0 0 rgba(255, 239, 0, 0);
        transform: scale(1);
      }
      50% {
        box-shadow: 0 0 20px 8px rgba(255, 239, 0, 0.6), 0 0 40px 16px rgba(255, 239, 0, 0.3);
        transform: scale(1.05);
      }
    }
    .lightbulb-twinkle {
      animation: lightbulb-twinkle 1.2s ease-in-out infinite;
    }
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
      background: #f1f5f9;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 3px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
    input, textarea {
      font-size: 16px !important;
    }
    input:focus, textarea:focus {
      outline: none !important;
      border-color: #9333ea !important;
      box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1) !important;
    }
  </style>
</head>
<body>
  <div id="app" class="min-h-screen bg-slate-50 font-sans text-slate-900 flex flex-col">
    <!-- Header -->
    <header class="bg-white border-b-2 border-slate-300 sticky top-0 z-30 shadow-sm">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 py-3 sm:py-4 min-h-[60px] sm:min-h-[80px] flex items-center justify-between">
        <div class="flex items-center gap-2 sm:gap-3">
          <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center shadow-lg">
            <svg class="text-white w-4 h-4 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
            </svg>
          </div>
          <span class="font-bold text-lg sm:text-xl tracking-tight text-slate-900">EduApp Builder</span>
        </div>
        <div class="flex items-center gap-2 sm:gap-3">
          <!-- ì»¤ë®¤ë‹ˆí‹° ë“œë¡­ë‹¤ìš´ ë©”ë‰´ -->
          <div class="relative">
            <button onclick="toggleCommunityMenu()" class="px-3 py-2 text-sm font-medium rounded-lg flex items-center gap-2 transition shadow-sm whitespace-nowrap h-9" style="background-color: #FEE500; color: #000000;">
              <svg class="w-4 h-4 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 3c5.799 0 10.5 3.664 10.5 8.185 0 4.52-4.701 8.184-10.5 8.184a13.5 13.5 0 0 1-1.727-.11l-4.408 2.883c-.501.265-.678.236-.472-.413l.892-3.678c-2.88-1.46-4.785-3.99-4.785-6.866C1.5 6.665 6.201 3 12 3z"/>
              </svg>
              <span>ì»¤ë®¤ë‹ˆí‹°</span>
            </button>
            <div id="community-dropdown" class="hidden absolute right-0 mt-2 bg-white rounded-lg shadow-xl border-2 border-slate-200 z-50 overflow-hidden" style="min-width: 220px; width: auto;">
              <a href="https://open.kakao.com/o/gqbARj9h" target="_blank" rel="noopener noreferrer" class="block px-4 py-2 text-black hover:bg-slate-50 transition-colors text-sm font-medium whitespace-nowrap text-center">
                ì œì‘ì ì¹´í†¡ë°©
              </a>
              <a href="https://open.kakao.com/o/gVSDtSIh" target="_blank" rel="noopener noreferrer" class="block px-4 py-2 text-black hover:bg-slate-50 transition-colors text-sm font-medium border-t border-slate-100 text-center">
                ê°œë°œì ë‹¨í†¡ë°©<br><span style="background-color: #fef08a; color: #000000; padding: 2px 6px; border-radius: 4px; font-weight: 600; display: inline-block;">ì…ì¥ì½”ë“œ:vibe</span>
              </a>
            </div>
          </div>
          <button onclick="toggleSettings()" class="p-2 sm:p-2.5 rounded-lg hover:bg-slate-100 transition-colors relative z-10 bg-transparent flex items-center justify-center" title="ì„¤ì •" style="min-width: 32px; min-height: 32px;">
            <svg class="w-5 h-5 sm:w-6 sm:h-6 text-slate-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="overflow: visible;">
              <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2" fill="none"/>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2v4M12 18v4M2 12h4M18 12h4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
              <circle cx="12" cy="12" r="2" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </button>
          <div class="text-xs sm:text-sm font-semibold text-slate-700 bg-slate-100 px-2 sm:px-4 py-1 sm:py-1.5 rounded-full">Step <span id="step-counter" class="text-purple-600">1</span> of 6</div>
        </div>
      </div>
      <!-- Step Progress Indicator -->
      <div class="w-full px-3 sm:px-6 py-3 sm:py-6 bg-white overflow-x-auto">
        <div class="max-w-4xl mx-auto min-w-[600px] sm:min-w-0">
          <div id="step-indicator" class="flex items-center justify-between relative">
            <!-- Steps will be generated here -->
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 max-w-4xl mx-auto w-full px-3 sm:px-4 lg:px-16 xl:px-20 py-4 sm:py-8 md:py-12 pb-20 sm:pb-24">
      <div id="step-content"></div>
    </main>

    <!-- Navigation Buttons -->
    <!-- Mobile: Bottom Center, Desktop: Left & Right -->
    <div id="footer-nav" class="fixed z-20 pointer-events-none">
      <!-- Mobile: Bottom Center -->
      <div class="sm:hidden fixed bottom-4 left-1/2 -translate-x-1/2 flex gap-4 items-center pointer-events-auto">
        <button id="prev-btn-mobile" onclick="prevStep()" class="inline-flex items-center justify-center rounded-full text-sm font-semibold transition-all bg-white text-slate-800 hover:bg-slate-100 hover:shadow-lg border-2 border-slate-300 h-12 w-12 px-0 disabled:opacity-40 disabled:pointer-events-none disabled:cursor-not-allowed shadow-md">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        <button id="next-btn-mobile" onclick="nextStep()" class="inline-flex items-center justify-center rounded-full text-sm font-bold transition-all bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl h-12 w-12 px-0 transform hover:scale-105">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
      <!-- Desktop: Left & Right -->
      <div class="hidden sm:block fixed left-4 lg:left-6 top-1/2 -translate-y-1/2 pointer-events-auto">
        <button id="prev-btn" onclick="prevStep()" class="inline-flex items-center justify-center rounded-full text-base font-semibold transition-all bg-white text-slate-800 hover:bg-slate-100 hover:shadow-lg border-2 border-slate-300 h-14 w-14 px-0 disabled:opacity-40 disabled:pointer-events-none disabled:cursor-not-allowed shadow-xl">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
      </div>
      <div class="hidden sm:block fixed right-4 lg:right-6 top-1/2 -translate-y-1/2 pointer-events-auto">
        <button id="next-btn" onclick="nextStep()" class="inline-flex items-center justify-center rounded-full text-base font-bold transition-all bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl h-14 w-14 px-0 transform hover:scale-105">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
      <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-in">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-2xl font-bold text-slate-900">ì„¤ì •</h3>
          <button onclick="toggleSettings()" class="text-slate-400 hover:text-slate-600 text-2xl font-bold">Ã—</button>
        </div>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-bold text-slate-700 mb-2">Gemini API í‚¤</label>
            <input 
              type="password"
              id="settings-api-key-input"
              placeholder="AIzaSy..."
              class="w-full p-3 rounded-lg border-2 border-slate-300 focus:border-purple-500 focus:outline-none text-base"
            />
            <p class="text-xs text-slate-500 mt-2">API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©° ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
          </div>
          <button onclick="const input = document.getElementById('settings-api-key-input'); if(input) { geminiApiKey = input.value; localStorage.setItem('geminiApiKey', input.value); } toggleSettings();" class="w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition-colors">
            ì €ì¥ ì™„ë£Œ
          </button>
        </div>
      </div>
    </div>

    <!-- AI Idea Booster (Floating) -->
    <div id="idea-booster-container"></div>
    
    <!-- Background Decor -->
    <div class="fixed top-0 left-0 w-full h-full pointer-events-none z-0 overflow-hidden">
      <div class="absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-purple-200/20 rounded-full blur-3xl"></div>
      <div class="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-200/20 rounded-full blur-3xl"></div>
    </div>
  </div>

  <script>
    // Global State
    let currentStep = 1;
    let geminiApiKey = 'AIzaSyABPfodYclIBvpJOHbKnkg9sFoP6V5DwDg'; // ê¸°ë³¸ API í‚¤
    let promptVersion = 'canva'; // 'canva' or 'gemini'
    let lightbulbClicked = false; // ì „êµ¬ ë²„íŠ¼ í´ë¦­ ì—¬ë¶€
    let step4Timer = null; // Step 4 íƒ€ì´ë¨¸
    const formData = {
      toolType: '', // 'í•™ê¸‰ê²½ì˜ë„êµ¬', 'ìˆ˜ì—… ê´€ë ¨ë„êµ¬', 'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'
      userInfo: '', // ì‚¬ìš©ì ì •ë³´ (ì§ê¸‰, ë‹´ë‹¹ ê³¼ëª© ë“±)
      painPoint: '',
      recurringTask: '',
      intent: '',
      solutionMethod: '',
      intentExpanded: false, // intent í•„ë“œ í™•ì¥ ìƒíƒœ
      solutionExpanded: false, // solutionMethod í•„ë“œ í™•ì¥ ìƒíƒœ
  features: '',
  tools: '',
  rules: '',
  vibe: '',
  workflow: '', // ì‘ë™ ê³¼ì •
  structuredData: {
    features: '',
    ui: '',
    data: '',
    rules: ''
      },
      geminiPrompt: '',
      editedPrompt: '', // í¸ì§‘ëœ í”„ë¡¬í”„íŠ¸
      promptLevel: '' // 'beginner' ë˜ëŠ” 'advanced'
    };

    // ë„êµ¬ ìœ í˜•ë³„ ì˜ˆì‹œ ë°ì´í„°
    const toolExamples = {
      'í•™ê¸‰ê²½ì˜ë„êµ¬': {
        painPoint: 'í•™ìƒë“¤ì˜ ì¶œì„ ì²´í¬ì™€ ìƒí™œê¸°ë¡ë¶€ ì…ë ¥ì´ ë§¤ì¼ ë°˜ë³µë˜ì–´ ì‹œê°„ì´ ë§ì´ ê±¸ë¦¬ê³  ì‹¤ìˆ˜ë„ ì¦ì•„ìš”. íŠ¹íˆ ê²°ì„, ì§€ê°, ì¡°í‡´ ì‚¬ìœ ë¥¼ ì¼ì¼ì´ í™•ì¸í•˜ê³  ê¸°ë¡í•˜ëŠ” ê²ƒì´ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤.',
        intent: 'í•™ê¸‰ ê´€ë¦¬ì˜ ë²ˆê±°ë¡œì›€',
        solutionMethod: 'ì¶œì„ ì²´í¬ì™€ ìƒí™œê¸°ë¡ë¶€ ì…ë ¥ì„ ìë™í™”í•˜ê³ , í•™ìƒ ì •ë³´ë¥¼ í•œëˆˆì— ë³¼ ìˆ˜ ìˆê²Œ',
        features: '- ì¶œì„ ì²´í¬ ìë™í™” (QRì½”ë“œ/ë²„íŠ¼ í´ë¦­)\n- ìƒí™œê¸°ë¡ë¶€ ìë™ ì…ë ¥\n- í•™ìƒë³„ ì¶œì„ í˜„í™© ëŒ€ì‹œë³´ë“œ\n- ì•Œë¦¼ ê¸°ëŠ¥ (ê²°ì„/ì§€ê° ì‹œ ë¶€ëª¨ë‹˜ê»˜ ìë™ ì „ì†¡)',
        vibe: 'ì‹ ë¢°ê° ìˆëŠ”, ê¹”ë”í•œ, ì „ë¬¸ì ì¸',
        rules: 'Next.js ì‚¬ìš©, í•œêµ­ì–´ ì£¼ì„ í•„ìˆ˜, ë°˜ì‘í˜• ë””ìì¸ í•„ìˆ˜',
        workflow: '1. í•™ìƒì´ QRì½”ë“œë¥¼ ìŠ¤ìº”í•˜ê±°ë‚˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì¶œì„ ì²´í¬\n2. ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ì¶œì„ ìƒíƒœë¥¼ ê¸°ë¡í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥\n3. ê²°ì„/ì§€ê°/ì¡°í‡´ ì‹œ ìë™ìœ¼ë¡œ ë¶€ëª¨ë‹˜ê»˜ ì•Œë¦¼ ì „ì†¡\n4. ë‹´ì„ì„ ìƒë‹˜ì´ ëŒ€ì‹œë³´ë“œì—ì„œ ì „ì²´ ì¶œì„ í˜„í™©ì„ í•œëˆˆì— í™•ì¸\n5. ìƒí™œê¸°ë¡ë¶€ì— ìë™ìœ¼ë¡œ ì¶œì„ ë°ì´í„° ì…ë ¥'
      },
      'ìˆ˜ì—… ê´€ë ¨ë„êµ¬': {
        painPoint: 'ìˆ˜ì—… ìë£Œ ì¤€ë¹„ì™€ í‰ê°€ ê¸°ë¡ ê´€ë¦¬ê°€ ë³µì¡í•˜ê³  ì‹œê°„ì´ ë§ì´ ê±¸ë ¤ìš”. íŠ¹íˆ í•™ìƒë³„ í‰ê°€ ì ìˆ˜ë¥¼ ì—‘ì…€ì— ì¼ì¼ì´ ì…ë ¥í•˜ê³ , ìˆ˜ì—… ê³„íšì„œë¥¼ ë§¤ë²ˆ ìƒˆë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤.',
        intent: 'ìˆ˜ì—… ì¤€ë¹„ì™€ í‰ê°€ ê´€ë¦¬ì˜ ë²ˆê±°ë¡œì›€',
        solutionMethod: 'ìˆ˜ì—… ìë£Œ ê´€ë¦¬ì™€ í‰ê°€ ê¸°ë¡ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•˜ê³  ìë™í™”',
        features: '- ìˆ˜ì—… ê³„íšì„œ í…œí”Œë¦¿ ê´€ë¦¬\n- í•™ìƒë³„ í‰ê°€ ì ìˆ˜ ìë™ ê¸°ë¡ ë° í†µê³„\n- ìˆ˜ì—… ìë£Œ ì €ì¥ ë° ê²€ìƒ‰\n- í‰ê°€ ê¸°ì¤€í‘œ ìë™ ìƒì„±',
        vibe: 'êµìœ¡ì ì¸, ì²´ê³„ì ì¸, ì‚¬ìš©í•˜ê¸° ì‰¬ìš´',
        rules: 'React ì‚¬ìš©, Htmlë¡œ ì œì‘, êµìœ¡ ìë£Œ í˜•ì‹ ì§€ì›',
        workflow: '1. ìˆ˜í–‰í‰ê°€ ìë£Œë¥¼ ì—…ë¡œë“œí•˜ê³  í‰ê°€ ê¸°ì¤€ì„ ì„¤ì •\n2. í•™ìƒë³„ í‰ê°€ ì ìˆ˜ë¥¼ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ í†µê³„ ê³„ì‚°\n3. ìˆ˜ì—… ê³„íšì„œ í…œí”Œë¦¿ì„ ì„ íƒí•˜ì—¬ ìˆ˜ì—… ê³„íš ì‘ì„±\n4. ìˆ˜ì—… ìë£Œë¥¼ ë¶„ë¥˜í•˜ì—¬ ì €ì¥í•˜ê³  ê²€ìƒ‰ ê¸°ëŠ¥ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì°¾ê¸°\n5. í‰ê°€ ê²°ê³¼ë¥¼ ë¦¬í¬íŠ¸ë¡œ ìë™ ìƒì„±í•˜ì—¬ ì¶œë ¥'
      },
      'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬': {
        painPoint: 'ë¬¸ì„œ ì‘ì„±ê³¼ ë°ì´í„° ì •ë¦¬ê°€ ë°˜ë³µì ì´ê³  ì‹œê°„ì´ ë§ì´ ê±¸ë ¤ìš”. íŠ¹íˆ íšŒì˜ë¡ ì‘ì„±, ë³´ê³ ì„œ ì‘ì„±, ê°ì¢… ì„œë¥˜ ì •ë¦¬ë¥¼ ë§¤ë²ˆ ì²˜ìŒë¶€í„° í•˜ëŠ” ê²ƒì´ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤.',
        intent: 'ë°˜ë³µì ì¸ ë¬¸ì„œ ì‘ì„±ê³¼ ë°ì´í„° ê´€ë¦¬ì˜ ë²ˆê±°ë¡œì›€',
        solutionMethod: 'ë¬¸ì„œ í…œí”Œë¦¿ê³¼ ìë™í™” ê¸°ëŠ¥ìœ¼ë¡œ ì—…ë¬´ ì‹œê°„ì„ ë‹¨ì¶•',
        features: '- ë¬¸ì„œ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬\n- ìë™ ë³´ê³ ì„œ ìƒì„±\n- ë°ì´í„° ìë™ ì •ë¦¬ ë° ë¶„ì„\n- ì¼ì • ê´€ë¦¬ ë° ì•Œë¦¼',
        vibe: 'íš¨ìœ¨ì ì¸, ëª¨ë˜í•œ, ì§ê´€ì ì¸',
        rules: 'TypeScript ì‚¬ìš©, í•œêµ­ì–´ ì£¼ì„ í•„ìˆ˜, ìë™í™” ê¸°ëŠ¥ ìš°ì„ ',
        workflow: '1. í•„ìš”í•œ ë¬¸ì„œ í…œí”Œë¦¿ì„ ì„ íƒí•˜ì—¬ ë¶ˆëŸ¬ì˜¤ê¸°\n2. ì…ë ¥í•œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìë™ìœ¼ë¡œ ë¬¸ì„œ ìƒì„±\n3. ìƒì„±ëœ ë¬¸ì„œë¥¼ ê²€í† í•˜ê³  ìˆ˜ì •\n4. ë¬¸ì„œë¥¼ ì €ì¥í•˜ê³  í•„ìš”í•œ ì‚¬ëŒì—ê²Œ ê³µìœ \n5. ì¼ì • ê´€ë¦¬ ê¸°ëŠ¥ìœ¼ë¡œ ë‹¤ìŒ ì‘ì—… ì•Œë¦¼ ì„¤ì •'
      }
    };

    // Gemini APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë„êµ¬ ìœ í˜•ë³„ ë§ì¶¤í˜• ì˜ˆì‹œ ìƒì„±
    let exampleCache = {}; // ì˜ˆì‹œ ìºì‹œ
    
    async function generateToolExample(field, toolType) {
      if (!geminiApiKey) {
        return toolExamples[toolType]?.[field] || '';
      }

      // ìºì‹œ í™•ì¸
      const cacheKey = `${toolType}_${field}`;
      if (exampleCache[cacheKey]) {
        return exampleCache[cacheKey];
      }

      const fieldNames = {
        workflow: 'ì‘ë™ ê³¼ì •',
        features: 'ì£¼ìš” ê¸°ëŠ¥',
        vibe: 'ë””ìì¸ ë°”ì´ë¸Œ',
        rules: 'ê¸°ìˆ  ìŠ¤íƒ ë° ê·œì¹™'
      };

      const baseExample = toolExamples[toolType]?.[field] || '';
      
      const prompt = `${toolType}ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ "${fieldNames[field] || field}" ì˜ˆì‹œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

ê¸°ë³¸ ì˜ˆì‹œ:
${baseExample}

ì´ ë„êµ¬ ìœ í˜•ì— ë§ëŠ” êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ì˜ˆì‹œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. 
- ${field === 'workflow' ? 'ë‹¨ê³„ë³„ë¡œ ë²ˆí˜¸ë¥¼ ë§¤ê²¨ì„œ ì‘ì„±í•´ì£¼ì„¸ìš”. ê° ë‹¨ê³„ëŠ” í•œ ì¤„ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.' : ''}
- ${field === 'features' ? 'í•µì‹¬ ê¸°ëŠ¥ 3-5ê°œë¥¼ ë‚˜ì—´í•´ì£¼ì„¸ìš”. ê° ê¸°ëŠ¥ì€ í•œ ì¤„ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.' : ''}
- ${field === 'vibe' ? 'í˜•ìš©ì‚¬ 3ê°œë¡œ ë””ìì¸ ëŠë‚Œì„ í‘œí˜„í•´ì£¼ì„¸ìš”.' : ''}
- ${field === 'rules' ? 'ì‚¬ìš©í•  ê¸°ìˆ  ìŠ¤íƒê³¼ ì½”ë”© ê·œì¹™ì„ ëª…ì‹œí•´ì£¼ì„¸ìš”.' : ''}

ì˜ˆì‹œë§Œ ë°˜í™˜í•´ì£¼ì„¸ìš”. ì„¤ëª…ì€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.`;

      try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiApiKey}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [{
              parts: [{ text: prompt }]
            }]
          })
        });

        if (response.ok) {
          const data = await response.json();
          if (data.candidates?.[0]?.content?.parts?.[0]?.text) {
            const generatedExample = data.candidates[0].content.parts[0].text.trim();
            exampleCache[cacheKey] = generatedExample;
            return generatedExample;
          }
        }
      } catch (error) {
        console.error('ì˜ˆì‹œ ìƒì„± ì‹¤íŒ¨:', error);
      }
      
      // ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì˜ˆì‹œ ë°˜í™˜
      return baseExample;
    }

    // Settings Modal
    function toggleSettings() {
      const modal = document.getElementById('settings-modal');
      if (modal) {
        const isOpening = modal.classList.contains('hidden');
        modal.classList.toggle('hidden');
        if (isOpening) {
          const input = document.getElementById('settings-api-key-input');
          if (input) {
            // localStorageì— ì €ì¥ëœ ê°’ì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
            const savedKey = localStorage.getItem('geminiApiKey');
            input.value = savedKey || geminiApiKey;
          }
        } else {
          // ë‹«ì„ ë•Œ ì €ì¥
          const input = document.getElementById('settings-api-key-input');
          if (input) {
            geminiApiKey = input.value || geminiApiKey;
            if (input.value) {
              localStorage.setItem('geminiApiKey', input.value);
            }
          }
        }
      }
    }

    function toggleCommunityMenu() {
      const dropdown = document.getElementById('community-dropdown');
      if (dropdown) {
        dropdown.classList.toggle('hidden');
      }
    }

    // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    document.addEventListener('click', function(event) {
      const dropdown = document.getElementById('community-dropdown');
      const button = event.target.closest('button[onclick*="toggleCommunityMenu"]');
      
      if (dropdown && !dropdown.contains(event.target) && !button) {
        dropdown.classList.add('hidden');
      }
    });

    // Icon SVG Helper
    const Icons = {
      Sparkles: '<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>',
      Bot: '<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>',
      Lightbulb: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>',
      Wand2: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>',
      Palette: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>',
      Terminal: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>',
      Copy: '<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>',
      Check: '<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>',
      ArrowRight: '<svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>',
      ArrowLeft: '<svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>'
    };

    // Helper Functions
    function updateField(field, value) {
      if (field.includes('.')) {
        const [parent, child] = field.split('.');
        formData[parent][child] = value;
      } else {
        formData[field] = value;
      }
      // AI ì¡°ì–¸ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
      updateAICoachButtons(field);
      // renderStep() í˜¸ì¶œ ì œê±° - ì…ë ¥í•  ë•Œë§ˆë‹¤ í™”ë©´ì´ ê¹œë¹¡ì´ì§€ ì•Šë„ë¡
    }

    // AI ì¡°ì–¸ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
    function updateAICoachButtons(field) {
      const fieldMap = {
        painPoint: 'painPoint',
        recurringTask: 'painPoint',
        vibe: 'vibe',
        features: 'features',
        solutionMethod: 'solutionMethod',
        rules: 'rules',
        workflow: 'workflow'
      };
      
      // í•´ë‹¹ í•„ë“œì™€ ê´€ë ¨ëœ ëª¨ë“  coach ë²„íŠ¼ ì°¾ê¸°
      const coachButtons = document.querySelectorAll('[id^="coach-"][id$="-btn"]');
      coachButtons.forEach(btn => {
        const coachId = btn.id.replace('-btn', '');
        const type = coachId.split('-')[1]; // coach-painPoint-123456 -> painPoint
        const relatedField = fieldMap[type] || type;
        
        if (relatedField === field) {
          const currentValue = formData[field] || '';
          const hasContent = currentValue.trim() !== '';
          
          if (hasContent) {
            btn.disabled = false;
            btn.classList.remove('opacity-50', 'cursor-not-allowed');
          } else {
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
          }
        }
      });
    }

    function updateProgress() {
      document.getElementById('step-counter').textContent = currentStep;
      
      const stepNames = [
        'ë„êµ¬ ì„ íƒ',
        'ë– ì˜¬ë¦¬ê¸°',
        'í•´ê²°ë°©í–¥',
        'ì„¸ë¶€ìš”ì†Œ',
        'ìŠ¤ì¼€ì¹˜ì •ë ¬',
        'í”„ë¡¬í”„íŠ¸'
      ];
      
      const indicator = document.getElementById('step-indicator');
      if (!indicator) return;
      
      // ë°°ê²½ ì—°ê²°ì„ 
      let html = '<div class="absolute top-3 sm:top-5 left-0 right-0 h-0.5 bg-slate-200 z-0"></div>';
      
      // ì™„ë£Œëœ ì—°ê²°ì„ 
      if (currentStep > 1) {
        const completedWidth = ((currentStep - 1) / 5) * 100;
        html += `<div class="absolute top-3 sm:top-5 left-0 h-0.5 bg-gradient-to-r from-green-500 to-green-400 z-0 transition-all duration-500" style="width: ${completedWidth}%"></div>`;
      }
      
      // ë‹¨ê³„ë³„ ì›í˜• ì•„ì´ì½˜
      for (let i = 1; i <= 6; i++) {
        const isCompleted = i < currentStep;
        const isCurrent = i === currentStep;
        const isPending = i > currentStep;
        
        // ì›í˜• ì•„ì´ì½˜
        let circleClass = 'w-7 h-7 sm:w-9 sm:h-9 lg:w-10 lg:h-10 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm transition-all duration-300 relative z-10 ';
        let circleContent = '';
        
        if (isCompleted) {
          circleClass += 'bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg transform scale-110';
          circleContent = '<svg class="w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg>';
        } else if (isCurrent) {
          circleClass += 'bg-gradient-to-br from-blue-600 to-purple-600 text-white shadow-xl transform scale-110 sm:scale-125 ring-2 sm:ring-4 ring-blue-200';
          circleContent = i;
        } else {
          circleClass += 'bg-slate-200 text-slate-400';
          circleContent = i;
        }
        
        html += `
          <div class="flex flex-col items-center flex-1 relative z-10">
            <div class="${circleClass}">
              ${circleContent}
            </div>
            <div class="mt-1 sm:mt-2 text-[10px] sm:text-xs font-medium text-center max-w-[60px] sm:max-w-[80px] ${isCurrent ? 'text-blue-600 font-bold' : isCompleted ? 'text-green-600' : 'text-slate-400'}">
              ${stepNames[i - 1]}
            </div>
          </div>
        `;
      }
      
      indicator.innerHTML = html;
    }

    // AI ì¡°ì–¸ ìƒì„± í•¨ìˆ˜ (Gemini 3.0 Pro) - ì‚¬ìš©ì ì…ë ¥ ë‚´ìš©ì„ ìˆ˜ì •í•´ì£¼ëŠ” ê¸°ëŠ¥
    async function improveWithAI(type, currentValue) {
      if (!geminiApiKey || !currentValue || currentValue.trim() === '') {
        alert('ë‚´ìš©ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return null;
      }

      const fieldNames = {
        painPoint: 'ì–´ë ¤ì›€ê³¼ ë°˜ë³µë˜ëŠ” ì¼',
        solutionMethod: 'í•´ê²° ë°©í–¥',
        features: 'ì£¼ìš” ê¸°ëŠ¥',
        vibe: 'ë””ìì¸ ë°”ì´ë¸Œ',
        rules: 'ê¸°ìˆ  ìŠ¤íƒ ë° ê·œì¹™',
        workflow: 'ì‘ë™ ê³¼ì •'
      };

      const prompt = `ë‹¤ìŒì€ ${formData.toolType}ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì‚¬ìš©ìê°€ ì‘ì„±í•œ "${fieldNames[type]}" ë‚´ìš©ì…ë‹ˆë‹¤:

"${currentValue}"

ì´ ë‚´ìš©ì„ ë” êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ê°œì„ í•´ì£¼ì„¸ìš”. ì›ë˜ ì˜ë„ë¥¼ ìœ ì§€í•˜ë©´ì„œ ë” ìì„¸í•˜ê³  ì‹¤ìš©ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”. ê°œì„ ëœ ë‚´ìš©ë§Œ ë°˜í™˜í•´ì£¼ì„¸ìš”.`;

      try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-preview:generateContent?key=${geminiApiKey}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [{
              parts: [{ text: prompt }]
            }]
          })
        });

        if (response.ok) {
          const data = await response.json();
          if (data.candidates?.[0]?.content?.parts?.[0]?.text) {
            return data.candidates[0].content.parts[0].text.trim();
          }
        }
      } catch (error) {
        console.error('AI ê°œì„  ì‹¤íŒ¨:', error);
        alert('AI ê°œì„ ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
      return null;
    }

    // Inline Coach Component
    function createInlineCoach(type, onApply) {
  const defaultTips = {
    painPoint: {
      text: "ê±°ì°½í•  í•„ìš” ì—†ì–´ìš”. 'ì—‘ì…€ ë³µì‚¬í•˜ê¸° ê·€ì°®ë‹¤' ê°™ì€ ì‚¬ì†Œí•œ ê²ƒë¶€í„° ì ì–´ë³´ì„¸ìš”!",
      example: "ë§¤ì¼ ë°˜ë³µë˜ëŠ” ì—‘ì…€ ë°ì´í„° ì·¨í•© ì—…ë¬´ê°€ ë„ˆë¬´ ë²ˆê±°ë¡­ê³  ì‹¤ìˆ˜ë„ ì¦ì•„ìš”."
    },
    recurringTask: {
      text: "ê°€ì¥ ì‹œê°„ì„ ë§ì´ ì¡ì•„ë¨¹ê±°ë‚˜, í•˜ê¸° ì‹«ì–´ì„œ ë¯¸ë£¨ê²Œ ë˜ëŠ” ì¼ì„ ì ì–´ë³´ì„¸ìš”.",
      example: "ì˜ìˆ˜ì¦ ì‚¬ì§„ ì°ì–´ì„œ ê¸ˆì•¡ ì…ë ¥í•˜ëŠ” ì¼"
    },
    vibe: {
      text: "í˜•ìš©ì‚¬ 3ê°œë¥¼ ì¨ë³´ì„¸ìš”. ì˜ˆ: ì‹¬í”Œí•œ, ë”°ëœ»í•œ, ì „ë¬¸ì ì¸.",
      example: "ì‹ ë¢°ê°ì„ ì£¼ëŠ” ë”¥ë¸”ë£¨ í†¤ì˜, ì „ë¬¸ì ì´ê³  ê¹”ë”í•œ ëŠë‚Œ"
    },
    features: {
      text: "í•µì‹¬ ê¸°ëŠ¥ 3ê°€ì§€ë§Œ ë¨¼ì € ìƒê°í•´ë³´ì„¸ìš”. ë„ˆë¬´ ë§ìœ¼ë©´ ê°œë°œì´ ì–´ë ¤ì›Œì ¸ìš”.",
      example: "- íšŒì›ê°€ì… ì—†ì´ ë°”ë¡œ ì‚¬ìš©\n- ì›í´ë¦­ PDF ë³€í™˜\n- ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥"
        },
        solution: {
          text: "êµ¬ì²´ì ì¸ í•´ê²° ë°©ë²•ì„ ì ì–´ë³´ì„¸ìš”.",
          example: "ì‚¬ì§„ë§Œ ì°ìœ¼ë©´ ìë™ìœ¼ë¡œ ì •ë¦¬ë˜ê²Œ"
        },
        rules: {
          text: "ì‚¬ìš©í•  ê¸°ìˆ  ìŠ¤íƒê³¼ ì½”ë”© ê·œì¹™ì„ ì ì–´ë³´ì„¸ìš”.",
          example: "Next.js ì‚¬ìš©, í•œêµ­ì–´ ì£¼ì„ í•„ìˆ˜, ì½”ë“œëŠ” ê°„ê²°í•˜ê²Œ"
    },
    workflow: {
      text: "ë‹¨ê³„ë³„ë¡œ ìˆœì„œëŒ€ë¡œ ì‘ì„±í•´ë³´ì„¸ìš”. ê° ë‹¨ê³„ëŠ” ëª…í™•í•˜ê³  êµ¬ì²´ì ìœ¼ë¡œ ì ì–´ì£¼ì„¸ìš”.",
      example: "1. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•œë‹¤\n2. ë©”ì¸ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•œë‹¤\n3. í•„ìš”í•œ ê¸°ëŠ¥ì„ ì„ íƒí•œë‹¤\n4. ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ì €ì¥í•œë‹¤"
    }
  };
  
  const tips = defaultTips;

  const currentTip = tips[type] || { text: "êµ¬ì²´ì ìœ¼ë¡œ ì ì„ìˆ˜ë¡ AIê°€ ë” ì˜ ì´í•´í•©ë‹ˆë‹¤.", example: "" };
      const coachId = `coach-${type}-${Date.now()}`;
      
      // í˜„ì¬ ì…ë ¥ í•„ë“œì˜ ê°’ í™•ì¸
      const fieldMap = {
        painPoint: 'painPoint',
        recurringTask: 'painPoint',
        vibe: 'vibe',
        features: 'features',
        solution: 'solutionMethod',
        rules: 'rules',
        workflow: 'workflow'
      };
      const field = fieldMap[type] || type;
      const currentValue = formData[field] || '';
      const hasContent = currentValue.trim() !== '';

      return `
        <div class="absolute bottom-4 right-4 z-10" id="${coachId}">
          <button onclick="handleAICoach('${coachId}', '${type}', '${field}')" 
                  class="flex items-center gap-2 text-sm text-purple-700 hover:text-purple-800 font-bold bg-gradient-to-r from-purple-50 to-pink-50 px-4 py-2 rounded-full transition-all border-2 border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg ${!hasContent ? 'opacity-50 cursor-not-allowed' : ''}" 
                  ${!hasContent ? 'disabled' : ''}
                  id="${coachId}-btn">
            ${Icons.Sparkles.replace('w-3 h-3', 'w-4 h-4')}
        AI ì¡°ì–¸
      </button>
          <div id="${coachId}-panel" class="hidden absolute bottom-full right-0 mb-3 w-80 bg-white rounded-2xl shadow-2xl border-2 border-purple-200 p-6 z-50 slide-in-from-bottom-2">
            <div class="flex justify-between items-start mb-4">
              <span class="text-sm font-bold text-purple-700 flex items-center gap-2">
                ${Icons.Bot.replace('w-3 h-3', 'w-4 h-4')} AI ê°œì„  ì¤‘...
            </span>
              <button onclick="toggleCoach('${coachId}')" class="text-slate-400 hover:text-slate-700 text-xl font-bold">Ã—</button>
          </div>
            <div id="${coachId}-content">
              <p class="text-base text-slate-800 mb-4 leading-relaxed font-medium">${currentTip.text}</p>
              ${currentTip.example ? `
                <div class="bg-gradient-to-br from-purple-50 to-blue-50 p-4 rounded-xl border-2 border-purple-100">
                  <p class="text-sm font-bold text-purple-700 mb-2">ğŸ’¡ ì˜ˆì‹œ:</p>
                  <p class="text-sm text-slate-800 italic leading-relaxed mb-3">"${currentTip.example}"</p>
                  <button onclick="applyCoachExample('${coachId}', '${type}', ${JSON.stringify(currentTip.example).replace(/"/g, '&quot;')})" class="w-full text-sm font-bold bg-white border-2 border-purple-300 py-2 rounded-lg text-purple-700 hover:bg-purple-50 hover:border-purple-400 transition-all shadow-sm hover:shadow-md">
                  ì´ ì˜ˆì‹œ ì ìš©í•˜ê¸°
                </button>
              </div>
              ` : ''}
            </div>
        </div>
    </div>
      `;
    }

    function toggleCoach(coachId) {
      const panel = document.getElementById(coachId + '-panel');
      if (panel) {
        panel.classList.toggle('hidden');
      }
    }

    // AI ì¡°ì–¸ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
    async function handleAICoach(coachId, type, field) {
      const currentValue = formData[field] || '';
      if (!currentValue.trim()) {
        alert('ë‚´ìš©ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      const panel = document.getElementById(coachId + '-panel');
      const contentDiv = document.getElementById(coachId + '-content');
      const btn = document.getElementById(coachId + '-btn');
      
      if (!panel || !contentDiv) return;

      // íŒ¨ë„ ì—´ê¸°
      if (panel.classList.contains('hidden')) {
        panel.classList.remove('hidden');
      }

      // ë¡œë”© ìƒíƒœ í‘œì‹œ
      contentDiv.innerHTML = `
        <div class="text-center py-4">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-3"></div>
          <p class="text-sm text-slate-600">AIê°€ ë‚´ìš©ì„ ê°œì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </div>
      `;
      
      if (btn) {
        btn.disabled = true;
        btn.classList.add('opacity-50', 'cursor-not-allowed');
      }

      // AI ê°œì„  ìš”ì²­
      const improvedText = await improveWithAI(type, currentValue);
      
      if (improvedText) {
        // ê°œì„ ëœ ë‚´ìš© í‘œì‹œ
        contentDiv.innerHTML = `
          <div class="space-y-4">
            <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-xl border-2 border-green-200">
              <p class="text-sm font-bold text-green-700 mb-2">âœ¨ ê°œì„ ëœ ë‚´ìš©:</p>
              <p class="text-sm text-slate-800 leading-relaxed whitespace-pre-wrap">${improvedText}</p>
            </div>
            <button onclick="applyImprovedContent('${coachId}', '${field}', ${JSON.stringify(improvedText).replace(/"/g, '&quot;')})" class="w-full text-sm font-bold bg-gradient-to-r from-purple-600 to-pink-600 text-white py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg">
              ê°œì„ ëœ ë‚´ìš© ì ìš©í•˜ê¸°
            </button>
          </div>
        `;
      } else {
        // ì‹¤íŒ¨ ì‹œ
        contentDiv.innerHTML = `
          <div class="text-center py-4">
            <p class="text-sm text-red-600 mb-3">AI ê°œì„ ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>
            <button onclick="toggleCoach('${coachId}')" class="text-sm text-slate-600 hover:text-slate-800">ë‹«ê¸°</button>
          </div>
        `;
      }
      
      if (btn) {
        btn.disabled = false;
        btn.classList.remove('opacity-50', 'cursor-not-allowed');
      }
    }

    // ê°œì„ ëœ ë‚´ìš© ì ìš©
    function applyImprovedContent(coachId, field, improvedText) {
      formData[field] = improvedText;
      
      // ì…ë ¥ í•„ë“œì— ê°’ ì§ì ‘ ì„¤ì •
      const inputs = document.querySelectorAll('input, textarea');
      inputs.forEach(input => {
        const oninputAttr = input.getAttribute('oninput');
        if (oninputAttr && oninputAttr.includes(field)) {
          input.value = improvedText;
        }
      });
      
      toggleCoach(coachId);
      alert('âœ¨ ê°œì„ ëœ ë‚´ìš©ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!');
    }

    function applyCoachExample(coachId, type, example) {
      const fieldMap = {
        painPoint: 'painPoint',
        recurringTask: 'recurringTask',
        vibe: 'vibe',
        features: 'features',
        solution: 'solutionMethod',
        rules: 'rules'
      };
      const field = fieldMap[type] || type;
      formData[field] = example;
      
      // ì…ë ¥ í•„ë“œì— ê°’ ì§ì ‘ ì„¤ì •
      const inputs = document.querySelectorAll('input, textarea');
      inputs.forEach(input => {
        const oninputAttr = input.getAttribute('oninput');
        if (oninputAttr && oninputAttr.includes(field)) {
          input.value = example;
        }
      });
      
      toggleCoach(coachId);
    }

    // Idea Booster
    function renderIdeaBooster() {
      if (currentStep < 3 || currentStep > 5) {
        document.getElementById('idea-booster-container').innerHTML = '';
        return;
      }

  const boosterCards = [
    {
          icon: '<span class="text-blue-500 font-bold">+</span>',
      title: 'ë”í•˜ê¸° (Add)',
      desc: 'ê¸°ëŠ¥ í™•ì¥: ì•Œë¦¼(Push) ê¸°ëŠ¥ì„ ë”í•˜ë©´ ì–´ë–¨ê¹Œìš”?',
      action: 'ì•Œë¦¼ ê¸°ëŠ¥ ì¶”ê°€'
    },
    {
          icon: '<span class="text-red-500 font-bold">-</span>',
      title: 'ë¹¼ê¸° (Subtract)',
      desc: 'MVP ì§‘ì¤‘: ë³µì¡í•œ ì„¤ì •ì„ ë¹¼ê³  ê¸°ë³¸ê°’ìœ¼ë¡œ ìë™í™”í•˜ì„¸ìš”.',
      action: 'ë³µì¡í•œ ì„¤ì • ì œê±° ë° ìë™í™”'
    },
    {
          icon: '<span class="text-green-500 font-bold">U</span>',
      title: 'í¸ë¦¬í•¨ (Usability)',
      desc: 'UX ê°œì„ : ìŒì„± ì¸ì‹ì´ë‚˜ í…œí”Œë¦¿ ì €ì¥ì„ ë„£ì–´ë³¼ê¹Œìš”?',
      action: 'ìŒì„± ì¸ì‹ ì…ë ¥ ê¸°ëŠ¥ ì¶”ê°€'
    },
    {
          icon: '<span class="text-purple-500 font-bold">AI</span>',
      title: 'AI ë„êµ¬ (AI Tech)',
      desc: 'ì§€ëŠ¥í™”: ë‚´ìš©ì„ AIê°€ ìë™ìœ¼ë¡œ ìš”ì•½í•´ì£¼ê²Œ í• ê¹Œìš”?',
      action: 'AI ìë™ ìš”ì•½ ë° ë¦¬í¬íŠ¸ ìƒì„± ê¸°ëŠ¥'
    }
  ];

      const boosterId = 'idea-booster-' + Date.now();
      // ì²˜ìŒì—ëŠ” í°ìƒ‰, í´ë¦­í–ˆê±°ë‚˜ Step 4ì—ì„œ 20ì´ˆ ì§€ë‚˜ë©´ ë…¸ë€ìƒ‰
      const isYellow = lightbulbClicked || (currentStep === 4 && document.getElementById(boosterId + '-btn')?.classList.contains('lightbulb-twinkle'));
      const buttonClass = isYellow 
        ? 'text-white ring-4' 
        : 'bg-gradient-to-br from-slate-100 to-slate-200 text-slate-400 hover:from-slate-200 hover:to-slate-300 ring-4 ring-slate-100';
      const buttonStyle = isYellow 
        ? 'background: linear-gradient(to bottom right, #FFEF00, #FFE600); box-shadow: 0 0 0 4px rgba(255, 239, 0, 0.2);'
        : '';
      const twinkleClass = (currentStep === 4 && !lightbulbClicked) ? 'lightbulb-twinkle' : '';
      
      document.getElementById('idea-booster-container').innerHTML = `
        <div class="fixed top-2 sm:top-3 left-1/2 -translate-x-1/2 z-50 flex flex-col items-center" id="${boosterId}">
          <div id="${boosterId}-panel" class="hidden mb-4 w-96 bg-white rounded-2xl shadow-2xl border-2 border-yellow-200 overflow-hidden slide-in-from-bottom-5">
            <div class="p-5 flex justify-between items-center" style="background: linear-gradient(to right, #FFEF00, #FFE600);">
              <h3 class="text-white font-bold text-lg flex items-center gap-3">
                ${Icons.Lightbulb.replace('w-4 h-4', 'w-5 h-5')} ì•„ì´ë””ì–´ ë¶€ìŠ¤í„°
            </h3>
              <button onclick="toggleIdeaBooster('${boosterId}')" class="text-white/90 hover:text-white text-2xl font-bold">Ã—</button>
          </div>
            <div class="p-5 bg-gradient-to-br from-slate-50 to-yellow-50 max-h-96 overflow-y-auto space-y-4">
              ${boosterCards.map((card, idx) => `
                <div onclick="applyIdea('${card.action}')" class="bg-white p-5 rounded-xl border-2 border-slate-200 shadow-md hover:shadow-xl hover:border-yellow-300 cursor-pointer transition-all group transform hover:scale-105">
                  <div class="flex items-center gap-3 mb-3">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-slate-100 to-yellow-100 flex items-center justify-center text-sm font-bold group-hover:from-yellow-200 group-hover:to-yellow-300 transition-all">
                      ${card.icon}
                  </div>
                    <span class="font-bold text-base text-slate-900">${card.title}</span>
                </div>
                  <p class="text-sm text-slate-700 pl-11 mb-3 leading-relaxed">${card.desc}</p>
                  <div class="pl-11">
                    <span class="text-xs text-yellow-600 font-bold opacity-0 group-hover:opacity-100 transition-opacity">
                    í´ë¦­í•´ì„œ ì ìš©í•˜ê¸° â†’
                  </span>
                </div>
              </div>
              `).join('')}
          </div>
        </div>
          <button onclick="toggleIdeaBooster('${boosterId}')" class="w-12 h-12 sm:w-14 sm:h-16 rounded-full shadow-2xl flex items-center justify-center transition-all duration-300 hover:scale-110 ${buttonClass} ${twinkleClass}" id="${boosterId}-btn" style="${buttonStyle}">
            <svg class="w-6 h-6 sm:w-7 sm:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
            </svg>
      </button>
    </div>
      `;
      
      // Step 4ì—ì„œ 20ì´ˆ í›„ ë°˜ì§ì´ê¸° ì‹œì‘
      if (currentStep === 4 && !lightbulbClicked) {
        if (step4Timer) clearTimeout(step4Timer);
        step4Timer = setTimeout(() => {
          const btn = document.getElementById(boosterId + '-btn');
          if (btn && !lightbulbClicked) {
            btn.classList.remove('bg-gradient-to-br', 'from-slate-100', 'to-slate-200', 'text-slate-400', 'ring-slate-100');
            btn.classList.add('text-white', 'ring-4', 'lightbulb-twinkle');
            btn.style.background = 'linear-gradient(to bottom right, #FFEF00, #FFE600)';
            btn.style.boxShadow = '0 0 0 4px rgba(255, 239, 0, 0.2)';
            btn.onmouseover = function() { this.style.background = 'linear-gradient(to bottom right, #FFE600, #FFD600)'; };
            btn.onmouseout = function() { this.style.background = 'linear-gradient(to bottom right, #FFEF00, #FFE600)'; };
            const svg = btn.querySelector('svg');
            if (svg) svg.classList.remove('text-slate-400');
          }
        }, 20000); // 20ì´ˆ í›„
      }
      
      // ë…¸ë€ìƒ‰ ë²„íŠ¼ì— hover ì´ë²¤íŠ¸ ì¶”ê°€
      if (isYellow) {
        setTimeout(() => {
          const btn = document.getElementById(boosterId + '-btn');
          if (btn) {
            btn.onmouseover = function() { this.style.background = 'linear-gradient(to bottom right, #FFE600, #FFD600)'; };
            btn.onmouseout = function() { this.style.background = 'linear-gradient(to bottom right, #FFEF00, #FFE600)'; };
          }
        }, 100);
      }
    }

    function toggleIdeaBooster(boosterId) {
      const panel = document.getElementById(boosterId + '-panel');
      const btn = document.getElementById(boosterId + '-btn');
      if (panel && btn) {
        const isOpen = !panel.classList.contains('hidden');
        panel.classList.toggle('hidden');
        
        // í´ë¦­ ì‹œ ë°˜ì§ì„ ì¤‘ì§€í•˜ê³  ë…¸ë€ìƒ‰ìœ¼ë¡œ ìœ ì§€
        if (!lightbulbClicked) {
          lightbulbClicked = true;
          if (step4Timer) {
            clearTimeout(step4Timer);
            step4Timer = null;
          }
          // ë…¸ë€ìƒ‰ìœ¼ë¡œ ë³€ê²½í•˜ê³  ë°˜ì§ì„ ì œê±°
          btn.classList.remove('bg-gradient-to-br', 'from-slate-100', 'to-slate-200', 'text-slate-400', 'ring-slate-100', 'lightbulb-twinkle');
          btn.classList.add('text-white', 'ring-4');
          btn.style.background = 'linear-gradient(to bottom right, #FFEF00, #FFE600)';
          btn.style.boxShadow = '0 0 0 4px rgba(255, 239, 0, 0.2)';
          btn.onmouseover = function() { this.style.background = 'linear-gradient(to bottom right, #FFE600, #FFD600)'; };
          btn.onmouseout = function() { this.style.background = 'linear-gradient(to bottom right, #FFEF00, #FFE600)'; };
          const svg = btn.querySelector('svg');
          if (svg) svg.classList.remove('text-slate-400');
        }
        
        if (isOpen) {
          // íŒ¨ë„ ë‹«ê¸° - ë²„íŠ¼ì€ ë…¸ë€ìƒ‰ ìœ ì§€
        } else {
          // íŒ¨ë„ ì—´ê¸° - ë²„íŠ¼ì€ ë…¸ë€ìƒ‰ ìœ ì§€
        }
      }
    }

    function applyIdea(idea) {
      if (currentStep === 3) {
        const newValue = formData.solutionMethod + (formData.solutionMethod ? ' (ì¶”ê°€ ì•„ì´ë””ì–´: ' : '') + idea + ')';
        formData.solutionMethod = newValue;
        // ì…ë ¥ í•„ë“œì— ê°’ ì§ì ‘ ì„¤ì •
        const inputs = document.querySelectorAll('input[oninput*="solutionMethod"]');
        inputs.forEach(input => {
          input.value = newValue;
        });
      } else if (currentStep === 4) {
        const newValue = formData.features + (formData.features ? '\n- ' : '- ') + idea;
        formData.features = newValue;
        // ì…ë ¥ í•„ë“œì— ê°’ ì§ì ‘ ì„¤ì •
        const textareas = document.querySelectorAll('textarea[oninput*="features"]');
        textareas.forEach(textarea => {
          textarea.value = newValue;
        });
      }
    alert(`âœ¨ ì•„ì´ë””ì–´ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤: ${idea}`);
    }

  // Step Navigation
    function nextStep() {
      // Step 5ì—ì„œëŠ” ë‹¤ìŒ ë²„íŠ¼ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ (ì´ˆê¸‰ììš©/ê³ ê¸‰ììš© ë²„íŠ¼ì„ ì‚¬ìš©í•´ì•¼ í•¨)
      if (currentStep === 5) {
        return;
      }
      
      if (currentStep < 6) {
        // Step 4ê°€ ì•„ë‹ˆë©´ íƒ€ì´ë¨¸ ì •ë¦¬
        if (currentStep !== 4 && step4Timer) {
          clearTimeout(step4Timer);
          step4Timer = null;
        }
        
        currentStep++;
        
        // Step 5 ì§„ì… ì‹œ AI ìë™ ì •ë¦¬ ë¡œì§
        if (currentStep === 5) {
          formData.structuredData = {
        features: formData.features || "- ë¡œê·¸ì¸/íšŒì›ê°€ì…\n- ë©”ì¸ ëŒ€ì‹œë³´ë“œ",
        ui: `Vibe: ${formData.vibe || 'ê¹”ë”í•œ ìŠ¤íƒ€ì¼'}\n- ë°˜ì‘í˜• ì›¹ ë””ìì¸\n- ë‹¤í¬ëª¨ë“œ ì§€ì›`,
        data: "User ë°ì´í„°, Post ë°ì´í„° í•„ìš”",
        rules: formData.rules || "Cursor Rules: TypeScript ì‚¬ìš©, ì£¼ì„ í•„ìˆ˜"
      };
        }
        
        // Step 6 ì§„ì… ì‹œ ìë™ìœ¼ë¡œ Gemini í”„ë¡¬í”„íŠ¸ ìƒì„± (ì´ˆê¸‰ììš©/ê³ ê¸‰ììš© ë²„íŠ¼ì„ í†µí•´ ì§„ì…í•œ ê²½ìš°ë§Œ)
        if (currentStep === 6) {
          if (geminiApiKey && !formData.geminiPrompt && formData.promptLevel) {
            generatePromptWithGemini();
          }
        }
        
        renderStep();
        updateProgress();
      }
    }

    function prevStep() {
      if (currentStep > 1) {
        // Step 4ê°€ ì•„ë‹ˆë©´ íƒ€ì´ë¨¸ ì •ë¦¬
        if (currentStep !== 4 && step4Timer) {
          clearTimeout(step4Timer);
          step4Timer = null;
        }
        
        currentStep--;
        renderStep();
        updateProgress();
      }
    }

    // í•„ë“œ í™•ì¥/ì¶•ì†Œ í† ê¸€ í•¨ìˆ˜
    function toggleExpandField(fieldType) {
      if (fieldType === 'intent') {
        formData.intentExpanded = !formData.intentExpanded;
        const input = document.getElementById('intent-input');
        const textarea = document.getElementById('intent-textarea');
        const container = input?.parentElement;
        const button = container?.querySelector('button[onclick*="intent"]');
        
        if (input && textarea) {
          if (formData.intentExpanded) {
            input.style.display = 'none';
            textarea.style.display = 'block';
            textarea.value = input.value;
            updateField('intent', input.value);
            setTimeout(() => textarea.focus(), 10);
          } else {
            textarea.style.display = 'none';
            input.style.display = 'block';
            input.value = textarea.value;
            updateField('intent', textarea.value);
            setTimeout(() => input.focus(), 10);
          }
          
          if (button) {
            button.textContent = formData.intentExpanded ? 'âˆ’' : '+';
            button.title = formData.intentExpanded ? 'ê°„ë‹¨íˆ ì“°ê¸°' : 'ìì„¸íˆ ì“°ê¸°';
          }
        }
      } else if (fieldType === 'solution') {
        formData.solutionExpanded = !formData.solutionExpanded;
        const input = document.getElementById('solution-input');
        const textarea = document.getElementById('solution-textarea');
        const container = input?.parentElement;
        const button = container?.querySelector('button[onclick*="solution"]');
        
        if (input && textarea) {
          if (formData.solutionExpanded) {
            input.style.display = 'none';
            textarea.style.display = 'block';
            textarea.value = input.value;
            updateField('solutionMethod', input.value);
            setTimeout(() => textarea.focus(), 10);
          } else {
            textarea.style.display = 'none';
            input.style.display = 'block';
            input.value = textarea.value;
            updateField('solutionMethod', textarea.value);
            setTimeout(() => input.focus(), 10);
          }
          
          if (button) {
            button.textContent = formData.solutionExpanded ? 'âˆ’' : '+';
            button.title = formData.solutionExpanded ? 'ê°„ë‹¨íˆ ì“°ê¸°' : 'ìì„¸íˆ ì“°ê¸°';
          }
        }
      }
    }

    // í”„ë¡¬í”„íŠ¸ ìƒì„± í•¨ìˆ˜ (ì´ˆê¸‰/ê³ ê¸‰ ì„ íƒ)
    function generatePrompt(level) {
      formData.promptLevel = level; // 'beginner' ë˜ëŠ” 'advanced'
      currentStep = 6;
      renderStep();
      updateProgress();
      
      // Gemini APIë¡œ í”„ë¡¬í”„íŠ¸ ìƒì„± ì‹œì‘
      if (geminiApiKey && !formData.geminiPrompt) {
        generatePromptWithGemini();
      }
    }

    // Render Steps
    let lastStep = 0;
    function renderStep() {
      const content = document.getElementById('step-content');
      const footer = document.getElementById('footer-nav');
      
      let html = '';
      // ë‹¨ê³„ê°€ ë³€ê²½ë  ë•Œë§Œ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
      const animateClass = (currentStep !== lastStep) ? 'animate-in' : '';
      lastStep = currentStep;

      switch (currentStep) {
      case 1:
          html = `
            <div class="space-y-6 ${animateClass} flex flex-col min-h-[calc(100vh-300px)] justify-center">
              <div class="text-center space-y-2 sm:space-y-4 mb-6 sm:mb-12">
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-slate-900 leading-tight">ë„êµ¬ ìœ í˜• ì„ íƒ</h2>
                <p class="text-sm sm:text-base lg:text-lg text-slate-600 leading-relaxed max-w-2xl mx-auto px-2">ë§Œë“¤ê³ ì í•˜ëŠ” ë„êµ¬ì˜ ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
            </div>

              <div class="flex flex-col gap-4 sm:gap-6 max-w-2xl mx-auto w-full px-2">
                <button onclick="formData.toolType = 'í•™ê¸‰ê²½ì˜ë„êµ¬'; nextStep();" class="rounded-2xl border-2 ${formData.toolType === 'í•™ê¸‰ê²½ì˜ë„êµ¬' ? 'border-purple-500 bg-purple-50' : 'border-slate-300 bg-white hover:border-purple-300'} shadow-lg p-6 sm:p-8 lg:p-10 hover:shadow-xl transition-all transform hover:scale-[1.02] text-left">
                  <div class="flex items-center gap-4 sm:gap-6">
                    <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center flex-shrink-0">
                      <svg class="w-8 h-8 sm:w-10 sm:h-10 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                      </svg>
              </div>
                    <div class="flex-1">
                      <h3 class="text-xl sm:text-2xl font-bold text-slate-900 mb-1 sm:mb-2">í•™ê¸‰ê²½ì˜ë„êµ¬</h3>
                      <p class="text-sm sm:text-base text-slate-600">í•™ê¸‰ ê´€ë¦¬, ì¶œì„ ì²´í¬, í•™ìƒ ê´€ë¦¬ ë“±</p>
                    </div>
                  </div>
                </button>

                <button onclick="formData.toolType = 'ìˆ˜ì—… ê´€ë ¨ë„êµ¬'; nextStep();" class="rounded-2xl border-2 ${formData.toolType === 'ìˆ˜ì—… ê´€ë ¨ë„êµ¬' ? 'border-blue-500 bg-blue-50' : 'border-slate-300 bg-white hover:border-blue-300'} shadow-lg p-6 sm:p-8 lg:p-10 hover:shadow-xl transition-all transform hover:scale-[1.02] text-left">
                  <div class="flex items-center gap-4 sm:gap-6">
                    <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-blue-100 to-cyan-100 rounded-xl flex items-center justify-center flex-shrink-0">
                      <svg class="w-8 h-8 sm:w-10 sm:h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                      </svg>
              </div>
                    <div class="flex-1">
                      <h3 class="text-xl sm:text-2xl font-bold text-slate-900 mb-1 sm:mb-2">ìˆ˜ì—… ê´€ë ¨ë„êµ¬</h3>
                      <p class="text-sm sm:text-base text-slate-600">ìˆ˜ì—… ì¤€ë¹„, ìë£Œ ê´€ë¦¬, í‰ê°€ ë“±</p>
          </div>
                  </div>
                </button>

                <button onclick="formData.toolType = 'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'; nextStep();" class="rounded-2xl border-2 ${formData.toolType === 'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬' ? 'border-green-500 bg-green-50' : 'border-slate-300 bg-white hover:border-green-300'} shadow-lg p-6 sm:p-8 lg:p-10 hover:shadow-xl transition-all transform hover:scale-[1.02] text-left">
                  <div class="flex items-center gap-4 sm:gap-6">
                    <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-green-100 to-emerald-100 rounded-xl flex items-center justify-center flex-shrink-0">
                      <svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                      </svg>
                    </div>
                    <div class="flex-1">
                      <h3 class="text-xl sm:text-2xl font-bold text-slate-900 mb-1 sm:mb-2">ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬</h3>
                      <p class="text-sm sm:text-base text-slate-600">ë¬¸ì„œ ì‘ì„±, ë°ì´í„° ê´€ë¦¬, ìë™í™” ë“±</p>
                    </div>
                  </div>
                </button>
              </div>
            </div>
          `;
          footer.style.display = 'block';
          break;
        
      case 2:
          const exampleForTool = toolExamples[formData.toolType] || toolExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
          html = `
            <div class="space-y-4 sm:space-y-8 ${animateClass}">
              <div class="text-center space-y-2 sm:space-y-4 mb-6 sm:mb-10">
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-slate-900 leading-tight">ë– ì˜¬ë¦¬ê¸° <span class="text-purple-600">(Pain Point)</span></h2>
                <p class="text-sm sm:text-base lg:text-lg text-slate-600 leading-relaxed max-w-2xl mx-auto px-2">${formData.toolType}ë¥¼ ë§Œë“¤ê¸° ìœ„í•´, í‰ì†Œì— ì–´ë–¤ ì–´ë ¤ì›€ì´ ìˆê³  ë°˜ë³µë˜ëŠ” ê·€ì°®ì€ ì¼ì´ ìˆë‚˜ìš”?</p>
            </div>

              <div class="rounded-2xl border-2 border-slate-300 bg-white text-slate-950 shadow-lg p-4 sm:p-6 lg:p-8 relative hover:shadow-xl transition-shadow">
                <label class="block text-base sm:text-lg font-bold text-slate-900 mb-3 sm:mb-4">
                  í‰ì†Œì— ì–´ë–¤ ì–´ë ¤ì›€ì´ ìˆê³ , ë°˜ë³µë˜ëŠ” ê·€ì°®ì€ ì¼ì€ ë¬´ì—‡ì¸ê°€ìš”?
                </label>
                <div class="relative">
                  <textarea 
                    class="w-full min-h-[200px] p-4 rounded-lg border-2 border-slate-300 focus:border-purple-500 text-base resize-none leading-relaxed bg-slate-50 focus:bg-white transition-colors"
                    placeholder="${exampleForTool.painPoint}"
                    oninput="updateField('painPoint', this.value)"
                  >${formData.painPoint}</textarea>
            </div>
                <div class="mt-3 flex items-center justify-between">
                  <button onclick="updateField('painPoint', '${exampleForTool.painPoint.replace(/'/g, "\\'")}'); const textarea = document.querySelector('textarea[oninput*=\\'painPoint\\']'); if(textarea) textarea.value = '${exampleForTool.painPoint.replace(/'/g, "\\'")}';" class="px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 font-semibold rounded-lg transition-colors text-sm">
                    ğŸ’¡ ${formData.toolType} ì˜ˆì‹œ ì ìš©í•˜ê¸°
                  </button>
                  <div id="painPoint-coach-container-step2"></div>
                </div>
              </div>
            </div>
          `;
          footer.style.display = 'block';
          break;

        case 3:
          const exampleForTool3 = toolExamples[formData.toolType] || toolExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
          html = `
            <div class="space-y-4 sm:space-y-8 ${animateClass}">
              <div class="text-center space-y-2 sm:space-y-4 mb-6 sm:mb-10">
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-slate-900 leading-tight">í•´ê²° ë°©í–¥ ì¡ê¸° <span class="text-blue-600">(Solution)</span></h2>
                <p class="text-sm sm:text-base lg:text-lg text-slate-600 leading-relaxed max-w-2xl mx-auto px-2">ë‹¹ì‹ ì˜ ì˜ë„(Intent)ë¥¼ ëª…í™•í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ì˜í•´ ë´…ì‹œë‹¤.</p>
            </div>

              <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-2xl border-2 border-blue-200 mb-8 shadow-md">
                <h4 class="text-sm font-bold text-blue-800 uppercase mb-3 tracking-wider">My Pain Point</h4>
                <p class="text-base text-blue-900 font-medium leading-relaxed">"${formData.painPoint || 'ì…ë ¥ëœ ë‚´ìš© ì—†ìŒ'}"</p>
                </div>
                
              <div class="rounded-2xl border-2 border-slate-300 bg-white text-slate-950 shadow-lg p-10 hover:shadow-xl transition-shadow">
                <div class="space-y-8 text-xl">
                  <div class="flex flex-col gap-3">
                    <span class="font-semibold text-slate-700 text-lg">ë‚˜ëŠ”</span>
                    <div class="relative">
                      <input 
                        id="intent-input"
                        type="text" 
                        class="border-b-4 border-slate-300 focus:border-purple-600 focus:outline-none px-3 py-2 bg-transparent text-slate-900 font-bold text-xl placeholder:font-normal placeholder:text-slate-400 transition-colors w-full"
                        placeholder="${exampleForTool3.intent}"
                        value="${formData.intent}"
                        oninput="updateField('intent', this.value)"
                        ${formData.intentExpanded ? 'style="display: none;"' : ''}
                      />
                      <textarea 
                        id="intent-textarea"
                        class="border-b-4 border-slate-300 focus:border-purple-600 focus:outline-none px-3 py-2 bg-transparent text-slate-900 font-bold text-xl placeholder:font-normal placeholder:text-slate-400 transition-colors w-full min-h-[100px] resize-none"
                        placeholder="${exampleForTool3.intent}"
                        oninput="updateField('intent', this.value)"
                        ${formData.intentExpanded ? '' : 'style="display: none;"'}
                      >${formData.intent}</textarea>
                      <button 
                        onclick="toggleExpandField('intent')"
                        class="absolute top-2 right-2 w-8 h-8 flex items-center justify-center text-black bg-white hover:bg-slate-100 rounded-full transition-colors border-2 border-slate-300 hover:border-slate-400 shadow-sm hover:shadow-md text-xl font-bold"
                        title="${formData.intentExpanded ? 'ê°„ë‹¨íˆ ì“°ê¸°' : 'ìì„¸íˆ ì“°ê¸°'}"
                      >
                        ${formData.intentExpanded ? 'âˆ’' : '+'}
                      </button>
                    </div>
                    <span class="font-semibold text-slate-700 text-lg">ì´ë¼ëŠ” ì–´ë ¤ì›€ì„</span>
                </div>
                
                  <div class="flex flex-col gap-3">
                    <div class="relative">
                      <input 
                        id="solution-input"
                        type="text" 
                        class="w-full border-b-4 border-slate-300 focus:border-purple-600 focus:outline-none px-3 py-2 bg-transparent text-slate-900 font-bold text-xl placeholder:font-normal placeholder:text-slate-400 transition-colors"
                        placeholder="${exampleForTool3.solutionMethod}"
                        value="${formData.solutionMethod}"
                        oninput="updateField('solutionMethod', this.value)"
                        ${formData.solutionExpanded ? 'style="display: none;"' : ''}
                      />
                      <textarea 
                        id="solution-textarea"
                        class="w-full border-b-4 border-slate-300 focus:border-purple-600 focus:outline-none px-3 py-2 bg-transparent text-slate-900 font-bold text-xl placeholder:font-normal placeholder:text-slate-400 transition-colors min-h-[100px] resize-none"
                        placeholder="${exampleForTool3.solutionMethod}"
                        oninput="updateField('solutionMethod', this.value)"
                        ${formData.solutionExpanded ? '' : 'style="display: none;"'}
                      >${formData.solutionMethod}</textarea>
                      <button 
                        onclick="toggleExpandField('solution')"
                        class="absolute top-2 right-2 w-8 h-8 flex items-center justify-center text-black bg-white hover:bg-slate-100 rounded-full transition-colors border-2 border-slate-300 hover:border-slate-400 shadow-sm hover:shadow-md text-xl font-bold"
                        title="${formData.solutionExpanded ? 'ê°„ë‹¨íˆ ì“°ê¸°' : 'ìì„¸íˆ ì“°ê¸°'}"
                      >
                        ${formData.solutionExpanded ? 'âˆ’' : '+'}
                      </button>
                  </div>
                    <span class="font-semibold text-slate-700 text-lg">í•´ê²°í•˜ê³  ì‹¶ë‹¤.</span>
                </div>
              </div>
                <div class="mt-4 flex gap-2 items-center justify-between">
                  <div class="flex gap-2">
                    <button onclick="updateField('intent', '${exampleForTool3.intent.replace(/'/g, "\\'")}'); const input = document.querySelector('input[oninput*=\\'intent\\']'); if(input) input.value = '${exampleForTool3.intent.replace(/'/g, "\\'")}';" class="px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold rounded-lg transition-colors text-sm">
                      ğŸ’¡ ì˜ë„ ì˜ˆì‹œ ì ìš©
                    </button>
                    <button onclick="updateField('solutionMethod', '${exampleForTool3.solutionMethod.replace(/'/g, "\\'")}'); const input = document.querySelector('input[oninput*=\\'solutionMethod\\']'); if(input) input.value = '${exampleForTool3.solutionMethod.replace(/'/g, "\\'")}';" class="px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold rounded-lg transition-colors text-sm">
                      ğŸ’¡ í•´ê²°ë°©ë²• ì˜ˆì‹œ ì ìš©
                    </button>
                  </div>
                  <div id="solution-coach-container-step3"></div>
                </div>
          </div>
              </div>
            </div>
          `;
          footer.style.display = 'block';
          break;

        case 4:
          const exampleForTool4 = toolExamples[formData.toolType] || toolExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
          html = `
            <div class="space-y-4 sm:space-y-8 ${animateClass} relative">
              <div class="space-y-2 sm:space-y-4 mb-6 sm:mb-10">
                <div class="flex items-center justify-center gap-4 mb-2 flex-wrap">
                  <h2 class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-slate-900 leading-tight">ì„¸ë¶€ ìš”ì†Œ ì •í•˜ê¸° <span class="text-indigo-600">(Details)</span></h2>
                  <button onclick="openExampleModal(4)" class="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center gap-2 text-sm sm:text-base whitespace-nowrap">
                    <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                    </svg>
                    <span>ì˜ˆì‹œë³´ê¸°</span>
                  </button>
                </div>
                <p class="text-center text-sm sm:text-base lg:text-lg text-slate-600 leading-relaxed max-w-2xl mx-auto px-2">ê°œë°œì— í•„ìš”í•œ êµ¬ì²´ì ì¸ ì¬ë£Œë“¤ì„ ì¤€ë¹„í•˜ëŠ” ì‹œê°„ì…ë‹ˆë‹¤.</p>
              </div>

              <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
              <div class="space-y-4">
                  <!-- ì‚¬ìš©ì ì •ë³´ ì…ë ¥ -->
                  <div class="rounded-2xl border-2 border-blue-200 bg-white text-slate-950 shadow-lg p-4 mb-4">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="p-2 bg-blue-100 rounded-lg text-blue-600">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                      </div>
                      <label class="text-base font-bold text-slate-900">ì‚¬ìš©ì ì •ë³´ <span class="text-blue-600 text-sm">(ì„ íƒì‚¬í•­)</span></label>
                    </div>
                    <input 
                      type="text"
                      class="w-full text-base p-3 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:bg-white transition-colors"
                      placeholder="ì˜ˆ: ì¤‘í•™êµ 2í•™ë…„ ë‹´ì„, ìˆ˜í•™ ë‹´ë‹¹, 30ëª… í•™ê¸‰ ê´€ë¦¬"
                      oninput="updateField('userInfo', this.value)"
                      value="${formData.userInfo}"
                    />
                    <p class="text-xs text-slate-500 mt-1">ì§ê¸‰, ë‹´ë‹¹ ê³¼ëª©, í•™ê¸‰ ê·œëª¨ ë“± ë„êµ¬ ê°œë°œì— í•„ìš”í•œ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="rounded-2xl border-2 border-purple-200 bg-white text-slate-950 shadow-lg p-6 relative hover:shadow-xl transition-shadow">
                      <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 bg-purple-100 rounded-lg text-purple-600">${Icons.Wand2}</div>
                        <label class="text-lg font-bold text-slate-900">ì£¼ìš” ê¸°ëŠ¥ <span class="text-purple-600">(Features)</span></label>
                    </div>
                    <textarea 
                        class="w-full min-h-[180px] text-base p-4 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-purple-500 focus:bg-white transition-colors leading-relaxed"
                      placeholder="${exampleForTool4.features}"
                        oninput="updateField('features', this.value)"
                      >${formData.features}</textarea>
                      ${createInlineCoach('features', updateField)}
                    </div>

                    <div class="rounded-2xl border-2 border-pink-200 bg-white text-slate-950 shadow-lg p-6 relative hover:shadow-xl transition-shadow">
                      <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 bg-pink-100 rounded-lg text-pink-600">${Icons.Palette}</div>
                        <label class="text-lg font-bold text-slate-900">ë””ìì¸ ë°”ì´ë¸Œ <span class="text-pink-600">(Vibe)</span></label>
                    </div>
                    <textarea 
                        class="w-full min-h-[180px] text-base p-4 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-pink-500 focus:bg-white transition-colors leading-relaxed"
                      placeholder="${exampleForTool4.vibe}"
                        oninput="updateField('vibe', this.value)"
                      >${formData.vibe}</textarea>
                      ${createInlineCoach('vibe', updateField)}
                  </div>

                    <div class="rounded-2xl border-2 border-emerald-200 bg-white text-slate-950 shadow-lg p-6 md:col-span-2 relative hover:shadow-xl transition-shadow">
                      <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 bg-emerald-100 rounded-lg text-emerald-600">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                          </svg>
                        </div>
                        <label class="text-lg font-bold text-slate-900">ì‘ë™ ê³¼ì • <span class="text-emerald-600">(Workflow)</span></label>
                    </div>
                    <textarea 
                        class="w-full min-h-[120px] text-base p-4 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-emerald-500 focus:bg-white transition-colors leading-relaxed"
                      placeholder="${exampleForTool4.workflow || '1. ì²« ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n2. ë‘ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n3. ì„¸ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n4. ê²°ê³¼ë¥¼ í™•ì¸í•œë‹¤'}"
                        oninput="updateField('workflow', this.value)"
                      >${formData.workflow}</textarea>
                      <p class="text-xs text-slate-500 mt-2">ë„êµ¬ê°€ ì‘ë™í•˜ëŠ” ë‹¨ê³„ë³„ ê³¼ì •ì„ ìˆœì„œëŒ€ë¡œ ì ì–´ì£¼ì„¸ìš”.</p>
                      ${createInlineCoach('workflow', updateField)}
                  </div>
              </div>
            </div>
          `;
          footer.style.display = 'block';
          break;

        case 5:
          const exampleForTool5 = toolExamples[formData.toolType] || toolExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
          const structureExamples = {
            'í•™ê¸‰ê²½ì˜ë„êµ¬': {
              features: `${exampleForTool5.features}

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- í•™ìƒë³„ ê°œì¸ ì •ë³´ ê´€ë¦¬ (ì´ë¦„, í•™ë²ˆ, ì—°ë½ì²˜)
- ì¶œì„ í†µê³„ ë° ê·¸ë˜í”„ í‘œì‹œ
- ìƒí™œê¸°ë¡ë¶€ ìë™ ì—°ë™ ê¸°ëŠ¥
- ë¶€ëª¨ë‹˜ ì•Œë¦¼ ì‹œìŠ¤í…œ (SMS/ì´ë©”ì¼)`,
              ui: `${exampleForTool5.vibe}

UI êµ¬ì„±:
- í•™ê¸‰ ëŒ€ì‹œë³´ë“œ (ì „ì²´ ì¶œì„ í˜„í™©)
- í•™ìƒ ëª©ë¡ ë° ê°œë³„ ìƒì„¸ í˜ì´ì§€
- ì¶œì„ ì²´í¬ ì¸í„°í˜ì´ìŠ¤ (QRì½”ë“œ/ë²„íŠ¼)
- í†µê³„ ë° ë¦¬í¬íŠ¸ í˜ì´ì§€
- ì•Œë¦¼ ì„¤ì • í˜ì´ì§€`
            },
            'ìˆ˜ì—… ê´€ë ¨ë„êµ¬': {
              features: `${exampleForTool5.features}

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- ìˆ˜ì—… ê³„íšì„œ í…œí”Œë¦¿ ê´€ë¦¬
- í•™ìƒë³„ í‰ê°€ ì ìˆ˜ ìë™ ê³„ì‚°
- ìˆ˜ì—… ìë£Œ ë¶„ë¥˜ ë° ê²€ìƒ‰
- í‰ê°€ ê¸°ì¤€í‘œ ìë™ ìƒì„± ë° ì ìš©`,
              ui: `${exampleForTool5.vibe}

UI êµ¬ì„±:
- ìˆ˜ì—… ëª©ë¡ ë° ìº˜ë¦°ë” ë·°
- ìˆ˜ì—… ê³„íšì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€
- í‰ê°€ ì ìˆ˜ ì…ë ¥ ë° ê´€ë¦¬ í˜ì´ì§€
- ìˆ˜ì—… ìë£Œ ë¼ì´ë¸ŒëŸ¬ë¦¬
- í†µê³„ ëŒ€ì‹œë³´ë“œ`
            },
            'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬': {
              features: `${exampleForTool5.features}

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- ë¬¸ì„œ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ìë™ ë³´ê³ ì„œ ìƒì„± ì—”ì§„
- ë°ì´í„° ë¶„ì„ ë° ì‹œê°í™”
- ì¼ì • ê´€ë¦¬ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ`,
              ui: `${exampleForTool5.vibe}

UI êµ¬ì„±:
- ë©”ì¸ ëŒ€ì‹œë³´ë“œ (ìµœê·¼ ë¬¸ì„œ, í†µê³„)
- ë¬¸ì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€
- í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ë°ì´í„° ê´€ë¦¬ í˜ì´ì§€
- ì¼ì • ê´€ë¦¬ ìº˜ë¦°ë”`
            }
          };
          const structureExample = structureExamples[formData.toolType] || structureExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
          
          html = `
            <div class="space-y-4 sm:space-y-8 ${animateClass} relative flex flex-col" style="max-height: calc(100vh - 200px);">
              <div class="space-y-2 sm:space-y-4 mb-6 sm:mb-10 flex-shrink-0">
                <div class="flex items-center justify-center gap-4 mb-2 flex-wrap">
                  <h2 class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-slate-900 leading-tight">ì „ì²´ ìŠ¤ì¼€ì¹˜ ì •ë ¬í•˜ê¸° <span class="text-purple-600">(Structure)</span></h2>
                  <button onclick="openExampleModal(5)" class="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center gap-2 text-sm sm:text-base whitespace-nowrap">
                    <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                    </svg>
                    <span>ì˜ˆì‹œë³´ê¸°</span>
                  </button>
                </div>
                <p class="text-center text-sm sm:text-base lg:text-lg text-slate-600 leading-relaxed max-w-2xl mx-auto px-2">ì…ë ¥í•˜ì‹  ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ AIê°€ êµ¬ì¡°ë¥¼ ì¡ì•˜ìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ë‹¤ë“¬ì–´ë³´ì„¸ìš”.</p>
              </div>

              <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ (ìŠ¤í¬ë¡¤ ê°€ëŠ¥) -->
              <div class="flex-1 overflow-y-auto custom-scrollbar pr-2">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8 min-h-[400px] sm:min-h-[500px] lg:min-h-[550px] pb-4">
                <!-- ì™¼ìª½: ë‚´ê°€ ì…ë ¥í•œ ë‚´ìš© -->
                <div class="space-y-5 overflow-y-auto pr-3 custom-scrollbar min-h-[300px] sm:min-h-[400px]">
                  <h3 class="text-base font-bold text-slate-700 uppercase tracking-wider mb-4">ë‚´ê°€ ì…ë ¥í•œ ë‚´ìš©</h3>
                  <div class="bg-gradient-to-br from-slate-50 to-blue-50 p-6 rounded-2xl border-2 border-slate-300 text-base space-y-5 shadow-md">
                    <div>
                      <span class="font-bold block text-slate-900 mb-2 text-lg">Pain Point:</span>
                      <p class="text-slate-700 leading-relaxed">${formData.painPoint || 'ì…ë ¥ ì—†ìŒ'}</p>
                    </div>
                    <div>
                      <span class="font-bold block text-slate-900 mb-2 text-lg">Solution:</span>
                      <p class="text-slate-700 leading-relaxed">${formData.solutionMethod || 'ì…ë ¥ ì—†ìŒ'}</p>
                    </div>
                    <div>
                      <span class="font-bold block text-slate-900 mb-2 text-lg">Features:</span>
                      <pre class="whitespace-pre-wrap font-sans text-slate-700 leading-relaxed">${formData.features || 'ì…ë ¥ ì—†ìŒ'}</pre>
                    </div>
                    <div>
                      <span class="font-bold block text-slate-900 mb-2 text-lg">ì‘ë™ ê³¼ì •:</span>
                      <pre class="whitespace-pre-wrap font-sans text-slate-700 leading-relaxed">${formData.workflow || 'ì…ë ¥ ì—†ìŒ'}</pre>
                    </div>
                  </div>
                </div>

                <!-- ì˜¤ë¥¸ìª½: AI êµ¬ì¡°í™” ì´ˆì•ˆ -->
                <div class="flex flex-col h-full">
                  <div class="flex justify-between items-center mb-4">
                    <h3 class="text-base font-bold text-purple-700 uppercase tracking-wider flex items-center gap-2 text-lg">
                      ${Icons.Sparkles} AI êµ¬ì¡°í™” ì´ˆì•ˆ
                    </h3>
                    <span class="text-sm text-slate-500 bg-slate-100 px-3 py-1 rounded-full font-medium">ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥</span>
                  </div>
                  <div class="flex-1 bg-white border-2 border-purple-300 rounded-2xl shadow-lg p-2 overflow-hidden flex flex-col">
                    <div class="bg-gradient-to-r from-purple-100 to-purple-50 px-5 py-3 text-sm font-bold text-purple-900 border-b-2 border-purple-200">
                      Features & Logic
                    </div>
                    <textarea 
                      class="flex-1 w-full p-5 text-base focus:outline-none resize-none leading-relaxed"
                      oninput="formData.structuredData.features = this.value"
                    >${formData.structuredData.features}</textarea>
                    <div class="bg-gradient-to-r from-blue-100 to-blue-50 px-5 py-3 text-sm font-bold text-blue-900 border-y-2 border-blue-200">
                      UI & Vibe
                    </div>
                    <textarea 
                      class="h-36 w-full p-5 text-base focus:outline-none resize-none leading-relaxed"
                      oninput="formData.structuredData.ui = this.value"
                    >${formData.structuredData.ui}</textarea>
                  </div>
                </div>
                </div>
              </div>
              
              <!-- í”„ë¡¬í”„íŠ¸ ìƒì„± ë²„íŠ¼ (ê³ ì •) -->
              <div class="mt-8 pt-8 border-t-2 border-slate-200 flex-shrink-0 bg-white">
                <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                  <button onclick="generatePrompt('beginner')" class="w-full sm:w-auto px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-3 text-base sm:text-lg">
                    <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    ì´ˆê¸‰ììš© í”„ë¡¬í”„íŠ¸ ìƒì„±
                  </button>
                  <button onclick="generatePrompt('advanced')" class="w-full sm:w-auto px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-3 text-base sm:text-lg">
                    <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                    ê³ ê¸‰ììš© í”„ë¡¬í”„íŠ¸ ìƒì„±
                  </button>
                </div>
                <p class="text-center text-sm text-slate-500 mt-4">
                  <span class="font-semibold text-purple-600">ì´ˆê¸‰ììš©:</span> í”„ë¡ íŠ¸ì—”ë“œë§Œ ìˆëŠ” ì‰½ê³  ì§ê´€ì ì¸ í”„ë¡¬í”„íŠ¸ | 
                  <span class="font-semibold text-blue-600">ê³ ê¸‰ììš©:</span> ë°±ì—”ë“œë¥¼ í¬í•¨í•œ ê³ ì„±ëŠ¥ í”„ë¡¬í”„íŠ¸
                </p>
              </div>
            </div>
          `;
          footer.style.display = 'block';
          break;

        case 6:
          // ë ˆë²¨ë³„ ê°€ì´ë“œë¼ì¸
          const beginnerGuidelines = `# Role
ë‹¹ì‹ ì€ ì¹œì ˆí•˜ê³  ëŠ¥ìˆ™í•œ 'í”„ë¡¬í”„íŠ¸ ë„ìš°ë¯¸'ì…ë‹ˆë‹¤. ê¸°ìˆ ì  ì§€ì‹ì´ ì—†ëŠ” ì‚¬ìš©ìë„ ë°”ë¡œ ë³µì‚¬í•´ì„œ ì“¸ ìˆ˜ ìˆëŠ” ì‰½ê³  ì§ê´€ì ì¸ 'ì´ˆê¸‰ììš© í”„ë¡¬í”„íŠ¸'ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

# Goal
ë³„ë„ì˜ ë°±ì—”ë“œ ì—°ë™ì´ë‚˜ ë³µì¡í•œ ì„¤ì • ì—†ì´, ì±„íŒ…ì°½ì— ê·¸ëŒ€ë¡œ ì…ë ¥í•˜ë©´ ë°”ë¡œ ì‘ë™í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.

# Writing Guidelines (ì´ˆê¸‰ìš© - ë‹¨ìˆœí™” ë° ìˆ˜ì • ìš©ì´ì„± ê°•ì¡°)
1. **ë³€ìˆ˜ ì‚¬ìš© ì§€ì–‘ (No Backend):**
   - \`{{input}}\`ì´ë‚˜ \`f"{text}"\` ê°™ì€ ì½”ë”©ìš© ê¸°í˜¸ë¥¼ ì ˆëŒ€ ì“°ì§€ ë§ˆì„¸ìš”.
   - ëŒ€ì‹  \`[ì—¬ê¸°ì— ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”]\`ë‚˜ \`(ë¶„ì„í•  ë¬¸ì¥)\`ê³¼ ê°™ì´ ì‚¬ìš©ìê°€ ì§ê´€ì ìœ¼ë¡œ ì•Œì•„ë³´ê³  ì±„ì›Œ ë„£ì„ ìˆ˜ ìˆëŠ” í•œê¸€ ì•ˆë‚´ ë¬¸êµ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
   
2. **ìˆ˜ì • ìš©ì´ì„± (Easy to Edit):**
   - ì‚¬ìš©ìê°€ ë¬¸ì¥ì˜ íŠ¹ì • ë‹¨ì–´(í˜•ìš©ì‚¬, ëª…ì‚¬)ë§Œ ë°”ê¾¸ë©´ ë°”ë¡œ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‘ìš©í•  ìˆ˜ ìˆë„ë¡ ë¬¸ì¥ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí•˜ê²Œ ë§Œë“œì„¸ìš”.
   - ì˜ˆ: "ì˜ì–´ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•´ì¤˜" (O) vs "Source Langì„ Target Langìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ ì‹¤í–‰" (X)

3. **ë‹¨ìˆœí•œ ê²°ê³¼ë¬¼ ì§€í–¥ (Simplicity):**
   - ì½”ë“œë¥¼ ìƒì„±í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¼ë©´, ìµœì í™”ëœ ë³µì¡í•œ ì½”ë“œë³´ë‹¤ëŠ” "ì´ˆë³´ìê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ë‹¨ìˆœí•˜ê³  ê¹”ë”í•œ í˜•íƒœì˜ ì½”ë“œ"ë¥¼ ì‘ì„±í•´ë‹¬ë¼ëŠ” ì§€ì‹œë¥¼ í¬í•¨í•˜ì„¸ìš”.
   - ê²°ê³¼ë¬¼ í˜•ì‹ ë˜í•œ JSON ê°™ì€ ë°ì´í„° í¬ë§·ë³´ë‹¤ëŠ” "ë³´ê¸° í¸í•œ ì¤„ê¸€"ì´ë‚˜ "í‘œ" í˜•ì‹ì„ ì¶”ì²œí•˜ì„¸ìš”.

4. **ëª…í™•í•œ êµ¬ì¡°:**
   - [ì—­í• ] - [ìš”ì²­ ì‚¬í•­] - [ì°¸ê³  ìë£Œ] ìˆœìœ¼ë¡œ ë¬¸ë‹¨ì„ ë‚˜ëˆ„ì–´ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.

# Output Format
- ì‘ì„±ëœ í”„ë¡¬í”„íŠ¸ëŠ” ë³µì‚¬í•˜ê¸° ì‰½ê²Œ **ì½”ë“œ ë¸”ë¡** ì•ˆì— ë„£ì–´ì£¼ì„¸ìš”.
- ì½”ë“œ ë¸”ë¡ í•˜ë‹¨ì—ëŠ” **"ğŸ’¡ ìˆ˜ì • íŒ: [OOO] ë¶€ë¶„ì„ [XXX]ë¡œ ë°”ê¾¸ë©´ ì´ë ‡ê²Œë„ ì“¸ ìˆ˜ ìˆì–´ìš”!"** ë¼ëŠ” ì‰¬ìš´ ê°€ì´ë“œë¥¼ í•œ ì¤„ ë§ë¶™ì—¬ì£¼ì„¸ìš”.`;

          const advancedGuidelines = `# Role
ë‹¹ì‹ ì€ LLM ì‹œìŠ¤í…œ ì„¤ê³„ë¥¼ ë‹´ë‹¹í•˜ëŠ” 'ì‹œë‹ˆì–´ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´'ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ëª¨í˜¸í•œ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ì—¬, í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œë„ ì˜¤ë¥˜ ì—†ì´ ì‘ë™í•˜ëŠ” ê³ ì„±ëŠ¥ì˜ 'ê³ ê¸‰ í”„ë¡¬í”„íŠ¸'ë¥¼ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤.

# Goal
ë³€ìˆ˜ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ êµ¬ì¡°í™”ëœ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ, **ê·¹ë„ë¡œ êµ¬ì²´ì ì´ê³  ì„¬ì„¸í•œ ì§€ì‹œì‚¬í•­**ì´ í¬í•¨ëœ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
# Writing Guidelines (ê³ ê¸‰ìš© ì‹¬í™” ê¸°ì¤€)
1. **ì—„ê²©í•œ êµ¬ì¡°í™”:** Markdown í—¤ë”(#)ì™€ XML íƒœê·¸(<Section>)ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ì˜ ê° íŒŒíŠ¸ë¥¼ ì‹œê°ì /ë…¼ë¦¬ì ìœ¼ë¡œ ëª…í™•íˆ êµ¬ë¶„í•˜ì„¸ìš”.
2. **ê³ í•´ìƒë„ ì§€ì‹œ(Concrete & Detailed):**
   - ë‹¨ìˆœíˆ "ìš”ì•½í•´ì¤˜"ë¼ê³  ì“°ì§€ ë§ê³ , "ìš”ì•½ì˜ ê¸¸ì´, ì¤‘ì ì ìœ¼ë¡œ ë‹¤ë¤„ì•¼ í•  í‚¤ì›Œë“œ, ë¬¸ì¥ì˜ ì–´ë¯¸ ìŠ¤íƒ€ì¼, ë°°ì œí•´ì•¼ í•  ë‚´ìš©" ë“±ì„ í˜„ë¯¸ê²½ìœ¼ë¡œ ë³´ë“¯ ìì„¸í•˜ê²Œ ì„œìˆ í•˜ì„¸ìš”.
   - AIê°€ íŒë‹¨ì„ ë‚´ë ¤ì•¼ í•˜ëŠ” ê²½ìš°, ê·¸ íŒë‹¨ì˜ ê¸°ì¤€(Criteria)ì„ ëª…í™•íˆ ì œì‹œí•˜ì„¸ìš”.
3. **ì„¬ì„¸í•œ ì œì•½(Nuance & Constraints):**
   - 'í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ(Negative Constraints)'ì„ ëª…ì‹œí•˜ì—¬ í™˜ê°(Hallucination)ì´ë‚˜ ì˜¤ë‹µì„ ë°©ì§€í•˜ì„¸ìš”.
   - ì–´ì¡°(Tone)ì™€ ë§¤ë„ˆ(Manner)ì— ëŒ€í•´ êµ¬ì²´ì ì¸ í˜•ìš©ì‚¬(ì˜ˆ: ê±´ì¡°í•œ, í•™ìˆ ì ì¸, ê³µê°í•˜ëŠ”)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì˜í•˜ì„¸ìš”.
4. **ë³€ìˆ˜ ë° ë°ì´í„° ì²˜ë¦¬:** ì…ë ¥ ë°ì´í„°ëŠ” \`{{variable}}\`ë¡œ í‘œê¸°í•˜ê³ , ë°ì´í„°ê°€ ë¹„ì–´ìˆê±°ë‚˜ ì´ìƒí•  ë•Œì˜ ëŒ€ì²˜ë²•(Edge Case Handling)ì„ í¬í•¨í•˜ì„¸ìš”.
5. **CoT ë° Few-shot:** ë³µì¡í•œ ì¶”ë¡ ì´ í•„ìš”í•œ ê²½ìš° \`<Steps>\`ë¥¼ í†µí•´ ì‚¬ê³  ê³¼ì •ì„ ìœ ë„í•˜ê³ , ì…ë ¥-ì¶œë ¥ ìŒìœ¼ë¡œ êµ¬ì„±ëœ \`<Examples>\`ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”.

# Output Format
- ì „ì²´ í”„ë¡¬í”„íŠ¸ë¥¼ ë³µì‚¬ ê°€ëŠ¥í•œ í•˜ë‚˜ì˜ ì½”ë“œ ë¸”ë¡ìœ¼ë¡œ ì œê³µí•˜ì„¸ìš”.
- í”„ë¡¬í”„íŠ¸ êµ¬ì„±:
  - **Role & Objective:** í˜ë¥´ì†Œë‚˜ì™€ ìµœì¢… ëª©í‘œ ì •ì˜
  - **Context:** ì‘ì—…ì˜ ë°°ê²½ ì§€ì‹
  - **Critical Rules:** ì ˆëŒ€ ì–´ê²¨ì„œëŠ” ì•ˆ ë˜ëŠ” ì œì•½ ì‚¬í•­ (ì„¬ì„¸í•œ ê°€ì´ë“œ)
  - **Workflow/Steps:** êµ¬ì²´ì ì´ê³  ë‹¨ê³„ì ì¸ ì‹¤í–‰ ì ˆì°¨
  - **Examples:** ì´ìƒì ì¸ ì˜ˆì‹œ (Few-shot)
  - **Output Schema:** JSON í¬ë§· ë˜ëŠ” ì—„ê²©í•œ ì¶œë ¥ ì–‘ì‹`;

          // ì„ íƒí•œ ë ˆë²¨ì— ë§ëŠ” ê°€ì´ë“œë¼ì¸ ì„ íƒ
          const selectedGuidelines = formData.promptLevel === 'beginner' ? beginnerGuidelines : 
                                     formData.promptLevel === 'advanced' ? advancedGuidelines : '';

          // ìƒì„¸ í”„ë¡¬í”„íŠ¸
          const detailedPrompt = formData.geminiPrompt || `
# í”„ë¡œì íŠ¸ ê°œìš”
ë„êµ¬ ìœ í˜•: ${formData.toolType}
${formData.userInfo ? `ì‚¬ìš©ì ì •ë³´: ${formData.userInfo}\n` : ''}
${formData.intent} ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ${formData.solutionMethod} ì•±ì„ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ê²ªëŠ” ì£¼ëœ ë¶ˆí¸í•¨ì€ "${formData.painPoint}" ì…ë‹ˆë‹¤.

# í•µì‹¬ ê¸°ëŠ¥
${formData.features || formData.structuredData.features}

# ì‘ë™ ê³¼ì •
${formData.workflow || 'ì‘ë™ ê³¼ì •ì´ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'}

# ë””ìì¸ ë°”ì´ë¸Œ (Vibe)
${formData.vibe || formData.structuredData.ui}

${selectedGuidelines ? `\n# í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ì´ë“œë¼ì¸\n${selectedGuidelines}\n` : ''}

# ìƒì„¸ ìš”êµ¬ì‚¬í•­
1. í”„ë¡œì íŠ¸ êµ¬ì¡°
   - í´ë” êµ¬ì¡° ë° íŒŒì¼ ëª…ëª… ê·œì¹™
   - ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
   - ìƒíƒœ ê´€ë¦¬ ë°©ì‹

2. ê¸°ëŠ¥ êµ¬í˜„ ìš°ì„ ìˆœìœ„
   - MVP ê¸°ëŠ¥ë¶€í„° êµ¬í˜„
   - ë‹¨ê³„ë³„ ê°œë°œ ê³„íš

3. UI/UX ê°€ì´ë“œë¼ì¸
   - ë””ìì¸ ì‹œìŠ¤í…œ ì ìš©
   - ë°˜ì‘í˜• ë””ìì¸ ê³ ë ¤
   - ì ‘ê·¼ì„± ê³ ë ¤ (WCAG)

4. ê°œë°œ ê·œì¹™
   - ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ
   - ì£¼ì„ ì‘ì„± ê·œì¹™
   - í…ŒìŠ¤íŠ¸ ì „ëµ

# ìš”ì²­ ì‚¬í•­
ìœ„ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì¡ê³ , ì²« ë²ˆì§¸ í˜ì´ì§€ë¥¼ êµ¬í˜„í•´ì£¼ì„¸ìš”.
${formData.toolType}ì— íŠ¹í™”ëœ ê¸°ëŠ¥ê³¼ UIë¥¼ ê³ ë ¤í•˜ì—¬ ê°œë°œí•´ì£¼ì„¸ìš”.
${selectedGuidelines ? '\nìœ„ í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ì´ë“œë¼ì¸ì„ ë°˜ë“œì‹œ ì¤€ìˆ˜í•˜ì—¬ ì‘ì„±í•´ì£¼ì„¸ìš”.' : ''}
        `.trim();

          const isGenerating = !formData.geminiPrompt && geminiApiKey && currentStep === 6;

          html = `
            <div class="space-y-4 sm:space-y-8 ${animateClass} pb-20 sm:pb-24">
              <div class="text-center space-y-2 sm:space-y-4 mb-6 sm:mb-10">
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-slate-900 leading-tight">ìµœì¢… í”„ë¡¬í”„íŠ¸ ìƒì„± <span class="text-green-600">(Result)</span></h2>
                <p class="text-sm sm:text-base lg:text-lg text-slate-600 leading-relaxed max-w-2xl mx-auto px-2">${isGenerating ? 'Gemini AIê°€ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...' : 'í”„ë¡¬í”„íŠ¸ë¥¼ í¸ì§‘í•œ í›„ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ì„¸ìš”!'}</p>
            </div>

              ${isGenerating ? `
                <div class="bg-blue-50 rounded-2xl border-2 border-blue-200 p-8 text-center">
                  <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                  <p class="text-blue-800 font-semibold">AIê°€ ìµœì í™”ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
              </div>
              ` : ''}

              <!-- í”„ë¡¬í”„íŠ¸ í‘œì‹œ ì˜ì—­ (ìƒì„± ì™„ë£Œ í›„ì—ë§Œ í‘œì‹œ) -->
              ${!isGenerating ? `
              <div class="rounded-2xl border-2 border-slate-400 bg-slate-900 text-slate-100 shadow-2xl p-0 overflow-hidden flex flex-col" style="max-height: calc(100vh - 250px); min-height: 300px;">
                <div class="flex justify-between items-center px-3 sm:px-6 py-3 sm:py-4 bg-slate-950 border-b-2 border-slate-700 flex-shrink-0">
                  <div class="flex items-center gap-2 sm:gap-3">
                    <span class="text-xs sm:text-sm font-mono font-semibold text-slate-400">prompt.md</span>
                    <span class="text-xs text-slate-500 bg-slate-800 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded">í¸ì§‘ ê°€ëŠ¥</span>
            </div>
                  <button onclick="copyEditedPrompt()" class="inline-flex items-center justify-center rounded-lg text-xs sm:text-base font-bold transition-all bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl h-8 sm:h-10 px-3 sm:px-6 transform hover:scale-105">
                    ${Icons.Copy.replace('w-3 h-3', 'w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2')} <span class="hidden sm:inline">ë³µì‚¬í•˜ê¸°</span><span class="sm:hidden">ë³µì‚¬</span>
                  </button>
          </div>
                <textarea 
                  id="prompt-editor"
                  class="flex-1 w-full p-4 sm:p-8 text-sm sm:text-base font-mono leading-relaxed whitespace-pre-wrap text-slate-200 bg-slate-900 border-0 focus:outline-none resize-none custom-scrollbar"
                  style="min-height: 250px;"
                  oninput="updateEditedPrompt(this.value)"
                  placeholder="í”„ë¡¬í”„íŠ¸ë¥¼ í¸ì§‘í•˜ì„¸ìš”..."
                >${formData.editedPrompt || formData.geminiPrompt || ''}</textarea>
              </div>
              ` : ''}
              
              <div class="flex flex-col items-center justify-center pt-6 pb-4 space-y-4">
                <div class="text-center">
                  <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                    ${Icons.Check.replace('w-10 h-10', 'w-10 h-10 sm:w-12 sm:h-12 text-green-600')}
              </div>
                  <h3 class="text-2xl sm:text-3xl font-extrabold text-slate-900 mb-2">í”„ë¡¬í”„íŠ¸ ìƒì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰</h3>
                  <p class="text-sm sm:text-base text-slate-600">ì´ì œ ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ ìƒë‹˜ë§Œì˜ ë©‹ì§„ ì•±ì„ ê°œë°œí•´ë³´ì„¸ìš”.</p>
            </div>
                <button onclick="currentStep = 1; renderStep(); updateProgress();" class="inline-flex items-center justify-center rounded-lg text-sm sm:text-base font-semibold transition-all border-2 border-slate-300 bg-white hover:bg-slate-50 hover:border-slate-400 text-slate-900 h-10 sm:h-12 px-6 sm:px-8 py-2 sm:py-3 shadow-md hover:shadow-lg">
                  ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
                </button>
              </div>
            </div>
          `;
          footer.style.display = 'block';
          break;
      }

      content.innerHTML = html;
      renderIdeaBooster();
      
      // Update button states
      // Update button states for both mobile and desktop
      const prevBtn = document.getElementById('prev-btn');
      const prevBtnMobile = document.getElementById('prev-btn-mobile');
      if (prevBtn) {
        prevBtn.disabled = currentStep === 1;
      }
      if (prevBtnMobile) {
        prevBtnMobile.disabled = currentStep === 1;
      }
      
      // Step 2: AI ì¡°ì–¸ ë²„íŠ¼ì„ í•˜ë‹¨ì— ì¶”ê°€
      if (currentStep === 2) {
        setTimeout(() => {
          const coachContainer = document.getElementById('painPoint-coach-container-step2');
          if (coachContainer) {
            const currentValue = formData.painPoint || '';
            const hasContent = currentValue.trim() !== '';
            const coachId = `coach-painPoint-step2-${Date.now()}`;
            
            coachContainer.innerHTML = `
              <div class="relative" id="${coachId}">
                <button onclick="handleAICoach('${coachId}', 'painPoint', 'painPoint')" 
                        class="flex items-center gap-2 text-sm text-purple-700 hover:text-purple-800 font-bold bg-gradient-to-r from-purple-50 to-pink-50 px-4 py-2 rounded-full transition-all border-2 border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg ${!hasContent ? 'opacity-50 cursor-not-allowed' : ''}" 
                        ${!hasContent ? 'disabled' : ''}
                        id="${coachId}-btn">
                  ${Icons.Sparkles.replace('w-3 h-3', 'w-4 h-4')}
                  AI ì¡°ì–¸
                </button>
                <div id="${coachId}-panel" class="hidden fixed bottom-20 left-1/2 transform -translate-x-1/2 w-80 bg-white rounded-2xl shadow-2xl border-2 border-purple-200 p-6 z-50 slide-in-from-bottom-2">
                  <div class="flex justify-between items-start mb-4">
                    <span class="text-sm font-bold text-purple-700 flex items-center gap-2">
                      ${Icons.Bot.replace('w-3 h-3', 'w-4 h-4')} AI ê°œì„  ì¤‘...
                    </span>
                    <button onclick="toggleCoach('${coachId}')" class="text-slate-400 hover:text-slate-700 text-xl font-bold">Ã—</button>
                  </div>
                  <div id="${coachId}-content">
                    <p class="text-base text-slate-800 mb-4 leading-relaxed font-medium">ê±°ì°½í•  í•„ìš” ì—†ì–´ìš”. 'ì—‘ì…€ ë³µì‚¬í•˜ê¸° ê·€ì°®ë‹¤' ê°™ì€ ì‚¬ì†Œí•œ ê²ƒë¶€í„° ì ì–´ë³´ì„¸ìš”!</p>
                    <div class="bg-gradient-to-br from-purple-50 to-blue-50 p-4 rounded-xl border-2 border-purple-100">
                      <p class="text-sm font-bold text-purple-700 mb-2">ğŸ’¡ ì˜ˆì‹œ:</p>
                      <p class="text-sm text-slate-800 italic leading-relaxed mb-3">"ë§¤ì¼ ë°˜ë³µë˜ëŠ” ì—‘ì…€ ë°ì´í„° ì·¨í•© ì—…ë¬´ê°€ ë„ˆë¬´ ë²ˆê±°ë¡­ê³  ì‹¤ìˆ˜ë„ ì¦ì•„ìš”."</p>
                      <button onclick="applyCoachExample('${coachId}', 'painPoint', 'ë§¤ì¼ ë°˜ë³µë˜ëŠ” ì—‘ì…€ ë°ì´í„° ì·¨í•© ì—…ë¬´ê°€ ë„ˆë¬´ ë²ˆê±°ë¡­ê³  ì‹¤ìˆ˜ë„ ì¦ì•„ìš”.')" class="w-full text-sm font-bold bg-white border-2 border-purple-300 py-2 rounded-lg text-purple-700 hover:bg-purple-50 hover:border-purple-400 transition-all shadow-sm hover:shadow-md">
                        ì´ ì˜ˆì‹œ ì ìš©í•˜ê¸°
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            `;
            
            // AI ì¡°ì–¸ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateAICoachButtons('painPoint');
          }
        }, 100);
      }
      
      // Step 3: AI ì¡°ì–¸ ë²„íŠ¼ì„ í•˜ë‹¨ì— ì¶”ê°€
      if (currentStep === 3) {
        setTimeout(() => {
          const coachContainer = document.getElementById('solution-coach-container-step3');
          if (coachContainer) {
            const currentValue = formData.solutionMethod || '';
            const hasContent = currentValue.trim() !== '';
            const coachId = `coach-solution-step3-${Date.now()}`;
            
            coachContainer.innerHTML = `
              <div class="relative" id="${coachId}">
                <button onclick="handleAICoach('${coachId}', 'solution', 'solutionMethod')" 
                        class="flex items-center gap-2 text-sm text-purple-700 hover:text-purple-800 font-bold bg-gradient-to-r from-purple-50 to-pink-50 px-4 py-2 rounded-full transition-all border-2 border-purple-200 hover:border-purple-300 shadow-md hover:shadow-lg ${!hasContent ? 'opacity-50 cursor-not-allowed' : ''}" 
                        ${!hasContent ? 'disabled' : ''}
                        id="${coachId}-btn">
                  ${Icons.Sparkles.replace('w-3 h-3', 'w-4 h-4')}
                  AI ì¡°ì–¸
                </button>
                <div id="${coachId}-panel" class="hidden fixed bottom-20 left-1/2 transform -translate-x-1/2 w-80 bg-white rounded-2xl shadow-2xl border-2 border-purple-200 p-6 z-50 slide-in-from-bottom-2">
                  <div class="flex justify-between items-start mb-4">
                    <span class="text-sm font-bold text-purple-700 flex items-center gap-2">
                      ${Icons.Bot.replace('w-3 h-3', 'w-4 h-4')} AI ê°œì„  ì¤‘...
                    </span>
                    <button onclick="toggleCoach('${coachId}')" class="text-slate-400 hover:text-slate-700 text-xl font-bold">Ã—</button>
                  </div>
                  <div id="${coachId}-content">
                    <p class="text-base text-slate-800 mb-4 leading-relaxed font-medium">êµ¬ì²´ì ì¸ í•´ê²° ë°©ë²•ì„ ì ì–´ë³´ì„¸ìš”.</p>
                    <div class="bg-gradient-to-br from-purple-50 to-blue-50 p-4 rounded-xl border-2 border-purple-100">
                      <p class="text-sm font-bold text-purple-700 mb-2">ğŸ’¡ ì˜ˆì‹œ:</p>
                      <p class="text-sm text-slate-800 italic leading-relaxed mb-3">"ì‚¬ì§„ë§Œ ì°ìœ¼ë©´ ìë™ìœ¼ë¡œ ì •ë¦¬ë˜ê²Œ"</p>
                      <button onclick="applyCoachExample('${coachId}', 'solution', 'ì‚¬ì§„ë§Œ ì°ìœ¼ë©´ ìë™ìœ¼ë¡œ ì •ë¦¬ë˜ê²Œ')" class="w-full text-sm font-bold bg-white border-2 border-purple-300 py-2 rounded-lg text-purple-700 hover:bg-purple-50 hover:border-purple-400 transition-all shadow-sm hover:shadow-md">
                        ì´ ì˜ˆì‹œ ì ìš©í•˜ê¸°
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            `;
            
            // AI ì¡°ì–¸ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateAICoachButtons('solutionMethod');
          }
        }, 100);
      }
      
      // AI ì¡°ì–¸ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
      setTimeout(() => {
        ['painPoint', 'solutionMethod', 'features', 'vibe', 'rules'].forEach(field => {
          updateAICoachButtons(field);
        });
      }, 100);
    }

    // Gemini API í˜¸ì¶œ í•¨ìˆ˜
    async function generatePromptWithGemini() {
      if (!geminiApiKey) {
        return; // API í‚¤ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©
      }

      // ì´ë¯¸ ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ê°€ ìˆìœ¼ë©´ ì¬ìƒì„±í•˜ì§€ ì•ŠìŒ
      if (formData.geminiPrompt) {
        return;
      }

      // ë ˆë²¨ë³„ ê°€ì´ë“œë¼ì¸
      const beginnerGuidelines = `# Role
ë‹¹ì‹ ì€ ì¹œì ˆí•˜ê³  ëŠ¥ìˆ™í•œ 'í”„ë¡¬í”„íŠ¸ ë„ìš°ë¯¸'ì…ë‹ˆë‹¤. ê¸°ìˆ ì  ì§€ì‹ì´ ì—†ëŠ” ì‚¬ìš©ìë„ ë°”ë¡œ ë³µì‚¬í•´ì„œ ì“¸ ìˆ˜ ìˆëŠ” ì‰½ê³  ì§ê´€ì ì¸ 'ì´ˆê¸‰ììš© í”„ë¡¬í”„íŠ¸'ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

# Goal
ë³„ë„ì˜ ë°±ì—”ë“œ ì—°ë™ì´ë‚˜ ë³µì¡í•œ ì„¤ì • ì—†ì´, ì±„íŒ…ì°½ì— ê·¸ëŒ€ë¡œ ì…ë ¥í•˜ë©´ ë°”ë¡œ ì‘ë™í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.

# Writing Guidelines (ì´ˆê¸‰ìš© - ë‹¨ìˆœí™” ë° ìˆ˜ì • ìš©ì´ì„± ê°•ì¡°)
1. **ë³€ìˆ˜ ì‚¬ìš© ì§€ì–‘ (No Backend):**
   - \`{{input}}\`ì´ë‚˜ \`f"{text}"\` ê°™ì€ ì½”ë”©ìš© ê¸°í˜¸ë¥¼ ì ˆëŒ€ ì“°ì§€ ë§ˆì„¸ìš”.
   - ëŒ€ì‹  \`[ì—¬ê¸°ì— ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”]\`ë‚˜ \`(ë¶„ì„í•  ë¬¸ì¥)\`ê³¼ ê°™ì´ ì‚¬ìš©ìê°€ ì§ê´€ì ìœ¼ë¡œ ì•Œì•„ë³´ê³  ì±„ì›Œ ë„£ì„ ìˆ˜ ìˆëŠ” í•œê¸€ ì•ˆë‚´ ë¬¸êµ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
   
2. **ìˆ˜ì • ìš©ì´ì„± (Easy to Edit):**
   - ì‚¬ìš©ìê°€ ë¬¸ì¥ì˜ íŠ¹ì • ë‹¨ì–´(í˜•ìš©ì‚¬, ëª…ì‚¬)ë§Œ ë°”ê¾¸ë©´ ë°”ë¡œ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‘ìš©í•  ìˆ˜ ìˆë„ë¡ ë¬¸ì¥ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí•˜ê²Œ ë§Œë“œì„¸ìš”.
   - ì˜ˆ: "ì˜ì–´ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•´ì¤˜" (O) vs "Source Langì„ Target Langìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ ì‹¤í–‰" (X)

3. **ë‹¨ìˆœí•œ ê²°ê³¼ë¬¼ ì§€í–¥ (Simplicity):**
   - ì½”ë“œë¥¼ ìƒì„±í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¼ë©´, ìµœì í™”ëœ ë³µì¡í•œ ì½”ë“œë³´ë‹¤ëŠ” "ì´ˆë³´ìê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ë‹¨ìˆœí•˜ê³  ê¹”ë”í•œ í˜•íƒœì˜ ì½”ë“œ"ë¥¼ ì‘ì„±í•´ë‹¬ë¼ëŠ” ì§€ì‹œë¥¼ í¬í•¨í•˜ì„¸ìš”.
   - ê²°ê³¼ë¬¼ í˜•ì‹ ë˜í•œ JSON ê°™ì€ ë°ì´í„° í¬ë§·ë³´ë‹¤ëŠ” "ë³´ê¸° í¸í•œ ì¤„ê¸€"ì´ë‚˜ "í‘œ" í˜•ì‹ì„ ì¶”ì²œí•˜ì„¸ìš”.

4. **ëª…í™•í•œ êµ¬ì¡°:**
   - [ì—­í• ] - [ìš”ì²­ ì‚¬í•­] - [ì°¸ê³  ìë£Œ] ìˆœìœ¼ë¡œ ë¬¸ë‹¨ì„ ë‚˜ëˆ„ì–´ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.`;

      const advancedGuidelines = `# Role
ë‹¹ì‹ ì€ LLM ì‹œìŠ¤í…œ ì„¤ê³„ë¥¼ ë‹´ë‹¹í•˜ëŠ” 'ì‹œë‹ˆì–´ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´'ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ëª¨í˜¸í•œ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ì—¬, í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œë„ ì˜¤ë¥˜ ì—†ì´ ì‘ë™í•˜ëŠ” ê³ ì„±ëŠ¥ì˜ 'ê³ ê¸‰ í”„ë¡¬í”„íŠ¸'ë¥¼ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤.

# Goal
ë³€ìˆ˜ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ êµ¬ì¡°í™”ëœ í…œí”Œë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ, **ê·¹ë„ë¡œ êµ¬ì²´ì ì´ê³  ì„¬ì„¸í•œ ì§€ì‹œì‚¬í•­**ì´ í¬í•¨ëœ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.

# Writing Guidelines (ê³ ê¸‰ìš© ì‹¬í™” ê¸°ì¤€)
1. **ì—„ê²©í•œ êµ¬ì¡°í™”:** Markdown í—¤ë”(#)ì™€ XML íƒœê·¸(<Section>)ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ì˜ ê° íŒŒíŠ¸ë¥¼ ì‹œê°ì /ë…¼ë¦¬ì ìœ¼ë¡œ ëª…í™•íˆ êµ¬ë¶„í•˜ì„¸ìš”.
2. **ê³ í•´ìƒë„ ì§€ì‹œ(Concrete & Detailed):**
   - ë‹¨ìˆœíˆ "ìš”ì•½í•´ì¤˜"ë¼ê³  ì“°ì§€ ë§ê³ , "ìš”ì•½ì˜ ê¸¸ì´, ì¤‘ì ì ìœ¼ë¡œ ë‹¤ë¤„ì•¼ í•  í‚¤ì›Œë“œ, ë¬¸ì¥ì˜ ì–´ë¯¸ ìŠ¤íƒ€ì¼, ë°°ì œí•´ì•¼ í•  ë‚´ìš©" ë“±ì„ í˜„ë¯¸ê²½ìœ¼ë¡œ ë³´ë“¯ ìì„¸í•˜ê²Œ ì„œìˆ í•˜ì„¸ìš”.
   - AIê°€ íŒë‹¨ì„ ë‚´ë ¤ì•¼ í•˜ëŠ” ê²½ìš°, ê·¸ íŒë‹¨ì˜ ê¸°ì¤€(Criteria)ì„ ëª…í™•íˆ ì œì‹œí•˜ì„¸ìš”.
3. **ì„¬ì„¸í•œ ì œì•½(Nuance & Constraints):**
   - 'í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ(Negative Constraints)'ì„ ëª…ì‹œí•˜ì—¬ í™˜ê°(Hallucination)ì´ë‚˜ ì˜¤ë‹µì„ ë°©ì§€í•˜ì„¸ìš”.
   - ì–´ì¡°(Tone)ì™€ ë§¤ë„ˆ(Manner)ì— ëŒ€í•´ êµ¬ì²´ì ì¸ í˜•ìš©ì‚¬(ì˜ˆ: ê±´ì¡°í•œ, í•™ìˆ ì ì¸, ê³µê°í•˜ëŠ”)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì˜í•˜ì„¸ìš”.
4. **ë³€ìˆ˜ ë° ë°ì´í„° ì²˜ë¦¬:** ì…ë ¥ ë°ì´í„°ëŠ” \`{{variable}}\`ë¡œ í‘œê¸°í•˜ê³ , ë°ì´í„°ê°€ ë¹„ì–´ìˆê±°ë‚˜ ì´ìƒí•  ë•Œì˜ ëŒ€ì²˜ë²•(Edge Case Handling)ì„ í¬í•¨í•˜ì„¸ìš”.
5. **CoT ë° Few-shot:** ë³µì¡í•œ ì¶”ë¡ ì´ í•„ìš”í•œ ê²½ìš° \`<Steps>\`ë¥¼ í†µí•´ ì‚¬ê³  ê³¼ì •ì„ ìœ ë„í•˜ê³ , ì…ë ¥-ì¶œë ¥ ìŒìœ¼ë¡œ êµ¬ì„±ëœ \`<Examples>\`ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”.`;

      const selectedGuidelines = formData.promptLevel === 'beginner' ? beginnerGuidelines : 
                                 formData.promptLevel === 'advanced' ? advancedGuidelines : '';

      const promptInput = `
ë‹¤ìŒ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Cursor/Windsurf AI ì—ë””í„°ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒì„¸í•œ í”„ë¡œì íŠ¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

# ë„êµ¬ ìœ í˜•
${formData.toolType}

${formData.userInfo ? `# ì‚¬ìš©ì ì •ë³´\n${formData.userInfo}\n` : ''}
# í”„ë¡œì íŠ¸ ê°œìš”
${formData.intent} ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ${formData.solutionMethod} ì•±ì„ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ê²ªëŠ” ì£¼ëœ ë¶ˆí¸í•¨ì€ "${formData.painPoint}" ì…ë‹ˆë‹¤.

# í•µì‹¬ ê¸°ëŠ¥
${formData.features || formData.structuredData.features}

# ì‘ë™ ê³¼ì •
${formData.workflow || 'ì‘ë™ ê³¼ì •ì´ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'}

# ë””ìì¸ ë°”ì´ë¸Œ (Vibe)
${formData.vibe || formData.structuredData.ui}

${selectedGuidelines ? `\n# í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ì´ë“œë¼ì¸\n${selectedGuidelines}\n` : ''}

ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ:
1. ëª…í™•í•˜ê³  êµ¬ì²´ì ì¸ í”„ë¡œì íŠ¸ ì„¤ëª…
2. ìƒì„¸í•œ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
3. ê¸°ìˆ  ìŠ¤íƒ ë° ì•„í‚¤í…ì²˜ ì œì•ˆ
4. êµ¬í˜„ ìš°ì„ ìˆœìœ„
5. ê°œë°œ ê°€ì´ë“œë¼ì¸

${formData.toolType}ì— íŠ¹í™”ëœ ê¸°ëŠ¥ê³¼ UIë¥¼ ê³ ë ¤í•˜ì—¬ ì „ë¬¸ì ì¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.
${selectedGuidelines ? '\nìœ„ í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ì´ë“œë¼ì¸ì„ ë°˜ë“œì‹œ ì¤€ìˆ˜í•˜ì—¬ ì‘ì„±í•´ì£¼ì„¸ìš”.' : ''}
      `.trim();

      try {
        // Gemini 2.0 Flash Experimental ëª¨ë¸ ì‚¬ìš© (ìµœì‹  ëª¨ë¸)
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiApiKey}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            contents: [{
              parts: [{
                text: promptInput
              }]
            }]
          })
        });

        if (!response.ok) {
          throw new Error(`API ì˜¤ë¥˜: ${response.status}`);
        }

        const data = await response.json();
        
        if (data.candidates && data.candidates[0] && data.candidates[0].content) {
          const generatedPrompt = data.candidates[0].content.parts[0].text;
          formData.geminiPrompt = generatedPrompt;
          renderStep();
        } else {
          throw new Error('í”„ë¡¬í”„íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        console.error('Gemini API ì˜¤ë¥˜:', error);
        // ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•¨
      }
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      }).catch(err => {
        console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
        // Fallback for older browsers
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      });
    }

    // í¸ì§‘ëœ í”„ë¡¬í”„íŠ¸ ì—…ë°ì´íŠ¸
    function updateEditedPrompt(value) {
      formData.editedPrompt = value;
    }

    // í¸ì§‘ëœ í”„ë¡¬í”„íŠ¸ ë³µì‚¬
    function copyEditedPrompt() {
      const editor = document.getElementById('prompt-editor');
      if (editor) {
        copyToClipboard(editor.value);
      } else {
        // í´ë°±: ì €ì¥ëœ ê°’ ì‚¬ìš©
        if (formData.editedPrompt) {
          copyToClipboard(formData.editedPrompt);
        }
      }
    }

    // ì˜ˆì‹œ íŒ¨ë„ í† ê¸€ í•¨ìˆ˜ (ì–‘ìª½ ë¶„í•  í˜•ì‹)
    async function toggleExamplePanel(step) {
      const panel = document.getElementById(`example-panel-${step}`);
      const toggleText = document.getElementById(`example-toggle-text-${step}`);
      
      if (panel) {
        const isHidden = panel.classList.contains('hidden');
        
        // ì•„ì½”ë””ì–¸ í˜•ì‹ìœ¼ë¡œ í† ê¸€
        panel.classList.toggle('hidden');
        
        if (toggleText) {
          toggleText.textContent = isHidden ? 'ì˜ˆì‹œ ë‹«ê¸°' : 'ì˜ˆì‹œë³´ê¸°';
        }
        
        // íŒ¨ë„ì´ ì—´ë¦´ ë•Œ Gemini APIë¡œ ì˜ˆì‹œ ìƒì„± (step 4ë§Œ)
        if (isHidden && step === 4) {
          await loadDynamicExamples(step);
        }
      }
    }

    // Step 4, 5 ì „ì²´ í™”ë©´ ì˜ˆì‹œ ëª¨ë‹¬
    function openExampleModal(step) {
      if (step !== 4 && step !== 5) return;
      
      // Step 4 ì²˜ë¦¬
      if (step === 4) {
        const exampleForTool4 = toolExamples[formData.toolType] || toolExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
        
        // ì„ì‹œ ì €ì¥ìš© ë°ì´í„°
        const tempData = {
          userInfo: formData.userInfo || '',
          features: formData.features || '',
          vibe: formData.vibe || '',
          workflow: formData.workflow || ''
        };
        
        const modalId = 'example-modal-fullscreen-4';
        let modal = document.getElementById(modalId);
        
        if (!modal) {
          modal = document.createElement('div');
          modal.id = modalId;
          document.body.appendChild(modal);
        }
        
        modal.className = 'fixed inset-0 bg-black/60 z-50 flex flex-col opacity-0 transition-opacity duration-300';
        modal.innerHTML = `
          <div class="flex-1 flex flex-col bg-white overflow-hidden">
            <!-- ëª¨ë‹¬ í—¤ë” -->
            <div class="bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4 flex justify-between items-center shadow-lg">
              <h2 class="text-xl sm:text-2xl font-bold text-white">ì˜ˆì‹œë³´ê¸° ëª¨ë“œ</h2>
              <button onclick="closeExampleModal(4)" class="text-white/90 hover:text-white text-3xl font-bold transition-transform hover:scale-110">Ã—</button>
            </div>
            
            <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
            <div class="flex-1 flex overflow-hidden">
              <!-- ì™¼ìª½: ë©”ì¸ ì½˜í…ì¸  (í¸ì§‘ ê°€ëŠ¥) -->
              <div class="flex-1 overflow-y-auto p-6 bg-slate-50">
                <div class="max-w-4xl mx-auto space-y-6">
                  <h3 class="text-2xl font-bold text-slate-900 mb-6">ë©”ì¸í˜ì´ì§€</h3>
                  
                  <!-- ì‚¬ìš©ì ì •ë³´ -->
                  <div class="bg-white rounded-2xl border-2 border-blue-200 shadow-lg p-6">
                    <div class="flex items-center gap-3 mb-4">
                      <div class="p-2 bg-blue-100 rounded-lg text-blue-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                      </div>
                      <label class="text-lg font-bold text-slate-900">ì‚¬ìš©ì ì •ë³´ <span class="text-blue-600 text-sm">(ì„ íƒì‚¬í•­)</span></label>
                    </div>
                    <input 
                      type="text"
                      id="modal-userInfo-edit"
                      class="w-full text-base p-3 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:bg-white transition-colors"
                      placeholder="ì˜ˆ: ì¤‘í•™êµ 2í•™ë…„ ë‹´ì„, ìˆ˜í•™ ë‹´ë‹¹, 30ëª… í•™ê¸‰ ê´€ë¦¬"
                      value="${tempData.userInfo}"
                    />
                    <p class="text-xs text-slate-500 mt-2">ì§ê¸‰, ë‹´ë‹¹ ê³¼ëª©, í•™ê¸‰ ê·œëª¨ ë“± ë„êµ¬ ê°œë°œì— í•„ìš”í•œ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                  </div>
                  
                  <!-- ì£¼ìš” ê¸°ëŠ¥ -->
                  <div class="bg-white rounded-2xl border-2 border-purple-200 shadow-lg p-6">
                    <div class="flex items-center gap-3 mb-4">
                      <div class="p-2 bg-purple-100 rounded-lg text-purple-600">${Icons.Wand2}</div>
                      <label class="text-lg font-bold text-slate-900">ì£¼ìš” ê¸°ëŠ¥ <span class="text-purple-600">(Features)</span></label>
                    </div>
                    <textarea 
                      id="modal-features-edit-4"
                      class="w-full min-h-[180px] text-base p-4 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-purple-500 focus:bg-white transition-colors leading-relaxed resize-none"
                      placeholder="${exampleForTool4.features}"
                    >${tempData.features}</textarea>
                  </div>
                  
                  <!-- ë””ìì¸ ë°”ì´ë¸Œ -->
                  <div class="bg-white rounded-2xl border-2 border-pink-200 shadow-lg p-6">
                    <div class="flex items-center gap-3 mb-4">
                      <div class="p-2 bg-pink-100 rounded-lg text-pink-600">${Icons.Palette}</div>
                      <label class="text-lg font-bold text-slate-900">ë””ìì¸ ë°”ì´ë¸Œ <span class="text-pink-600">(Vibe)</span></label>
                    </div>
                    <textarea 
                      id="modal-vibe-edit-4"
                      class="w-full min-h-[180px] text-base p-4 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-pink-500 focus:bg-white transition-colors leading-relaxed resize-none"
                      placeholder="${exampleForTool4.vibe}"
                    >${tempData.vibe}</textarea>
                  </div>
                  
                  <!-- ì‘ë™ ê³¼ì • -->
                  <div class="bg-white rounded-2xl border-2 border-emerald-200 shadow-lg p-6">
                    <div class="flex items-center gap-3 mb-4">
                      <div class="p-2 bg-emerald-100 rounded-lg text-emerald-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                        </svg>
                      </div>
                      <label class="text-lg font-bold text-slate-900">ì‘ë™ ê³¼ì • <span class="text-emerald-600">(Workflow)</span></label>
                    </div>
                    <textarea 
                      id="modal-workflow-edit-4"
                      class="w-full min-h-[120px] text-base p-4 rounded-lg bg-slate-50 border-2 border-slate-300 focus:border-emerald-500 focus:bg-white transition-colors leading-relaxed resize-none"
                      placeholder="${exampleForTool4.workflow || '1. ì²« ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n2. ë‘ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n3. ì„¸ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n4. ê²°ê³¼ë¥¼ í™•ì¸í•œë‹¤'}"
                    >${tempData.workflow}</textarea>
                    <p class="text-xs text-slate-500 mt-2">ë„êµ¬ê°€ ì‘ë™í•˜ëŠ” ë‹¨ê³„ë³„ ê³¼ì •ì„ ìˆœì„œëŒ€ë¡œ ì ì–´ì£¼ì„¸ìš”.</p>
                  </div>
                </div>
              </div>
              
              <!-- ì˜¤ë¥¸ìª½: ì˜ˆì‹œ íŒ¨ë„ -->
              <div class="w-full lg:w-96 xl:w-[450px] bg-white border-l-2 border-slate-200 overflow-y-auto">
                <div class="p-6 space-y-6">
                  <h3 class="text-xl font-bold text-slate-900 mb-4">ì˜ˆì‹œ</h3>
                  
                  <div class="bg-purple-50 p-4 rounded-lg border-2 border-purple-200">
                    <h4 class="text-base font-bold text-purple-900 mb-3">ì£¼ìš” ê¸°ëŠ¥ (Features) ì˜ˆì‹œ:</h4>
                    <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-purple-100 max-h-[200px] overflow-y-auto">${exampleForTool4.features}</pre>
                    <p class="text-xs text-purple-700 mt-2">ğŸ’¡ í•µì‹¬ ê¸°ëŠ¥ 3-5ê°œë¥¼ ëª…í™•í•˜ê²Œ ë‚˜ì—´í•˜ì„¸ìš”.</p>
                  </div>
                  
                  <div class="bg-pink-50 p-4 rounded-lg border-2 border-pink-200">
                    <h4 class="text-base font-bold text-pink-900 mb-3">ë””ìì¸ ë°”ì´ë¸Œ (Vibe) ì˜ˆì‹œ:</h4>
                    <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-pink-100 max-h-[200px] overflow-y-auto">${exampleForTool4.vibe}</pre>
                    <p class="text-xs text-pink-700 mt-2">ğŸ’¡ í˜•ìš©ì‚¬ 3ê°œë¡œ ë””ìì¸ ëŠë‚Œì„ í‘œí˜„í•˜ì„¸ìš”.</p>
                  </div>
                  
                  <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
                    <h4 class="text-base font-bold text-blue-900 mb-3">ì‚¬ìš©ì ì •ë³´ ì˜ˆì‹œ:</h4>
                    <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-blue-100">${formData.toolType === 'í•™ê¸‰ê²½ì˜ë„êµ¬' ? 'ì¤‘í•™êµ 2í•™ë…„ ë‹´ì„, ìˆ˜í•™ ë‹´ë‹¹, 30ëª… í•™ê¸‰ ê´€ë¦¬' : formData.toolType === 'ìˆ˜ì—… ê´€ë ¨ë„êµ¬' ? 'ì¤‘í•™êµ 1í•™ë…„ ìˆ˜í•™ ë‹´ë‹¹, 3ê°œ í•™ê¸‰, ìˆ˜í–‰í‰ê°€ ê´€ë¦¬' : 'ì´ˆë“±í•™êµ ë‹´ì„, ì „ê³¼ëª© ë‹´ë‹¹, 25ëª… í•™ê¸‰'}</pre>
                    <p class="text-xs text-blue-700 mt-2">ğŸ’¡ ì§ê¸‰, ë‹´ë‹¹ ê³¼ëª©, í•™ê¸‰ ê·œëª¨ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”.</p>
                  </div>

                  <div class="bg-emerald-50 p-4 rounded-lg border-2 border-emerald-200">
                    <h4 class="text-base font-bold text-emerald-900 mb-3">ì‘ë™ ê³¼ì • ì˜ˆì‹œ:</h4>
                    <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-emerald-100 max-h-[200px] overflow-y-auto">${exampleForTool4.workflow || '1. ì²« ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n2. ë‘ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n3. ì„¸ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•œë‹¤\n4. ê²°ê³¼ë¥¼ í™•ì¸í•œë‹¤'}</pre>
                    <p class="text-xs text-emerald-700 mt-2">ğŸ’¡ ë‹¨ê³„ë³„ë¡œ ìˆœì„œëŒ€ë¡œ ì‘ì„±í•˜ì„¸ìš”.</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- ëª¨ë‹¬ í‘¸í„° (ì €ì¥ ë²„íŠ¼) -->
            <div class="bg-slate-100 px-6 py-4 flex justify-end gap-4 border-t-2 border-slate-300">
              <button onclick="closeExampleModal(4)" class="px-6 py-2 bg-slate-300 hover:bg-slate-400 text-slate-900 font-bold rounded-lg transition-all">
                ì·¨ì†Œ
              </button>
              <button onclick="saveModalChanges(4)" class="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105">
                ì €ì¥
              </button>
            </div>
          </div>
        `;
        
        // body ìŠ¤í¬ë¡¤ ë°©ì§€
        document.body.style.overflow = 'hidden';
        
        // ëª¨ë‹¬ ì—´ê¸° ì• ë‹ˆë©”ì´ì…˜
        requestAnimationFrame(() => {
          modal.classList.remove('opacity-0');
          modal.classList.add('opacity-100');
        });
        
        return;
      }
      
      // Step 5 ì²˜ë¦¬
      if (step === 5) {
      
      const structureExamples = {
        'í•™ê¸‰ê²½ì˜ë„êµ¬': {
          features: `- ë¡œê·¸ì¸/íšŒì›ê°€ì…
- í•™ìƒ ì¶œì„ ê´€ë¦¬ ì‹œìŠ¤í…œ
- í•™ê¸‰ ì¼ì • ê´€ë¦¬
- ì•Œë¦¼ ë° ê³µì§€ì‚¬í•­

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- í•™ìƒë³„ ê°œì¸ ì •ë³´ ê´€ë¦¬ (ì´ë¦„, í•™ë²ˆ, ì—°ë½ì²˜)
- ì¶œì„ í†µê³„ ë° ê·¸ë˜í”„ í‘œì‹œ
- ìƒí™œê¸°ë¡ë¶€ ìë™ ì—°ë™ ê¸°ëŠ¥
- ë¶€ëª¨ë‹˜ ì•Œë¦¼ ì‹œìŠ¤í…œ (SMS/ì´ë©”ì¼)`,
          ui: `Vibe: ê¹”ë”í•˜ê³  ì§ê´€ì ì¸ ìŠ¤íƒ€ì¼

UI êµ¬ì„±:
- í•™ê¸‰ ëŒ€ì‹œë³´ë“œ (ì „ì²´ ì¶œì„ í˜„í™©)
- í•™ìƒ ëª©ë¡ ë° ê°œë³„ ìƒì„¸ í˜ì´ì§€
- ì¶œì„ ì²´í¬ ì¸í„°í˜ì´ìŠ¤ (QRì½”ë“œ/ë²„íŠ¼)
- í†µê³„ ë° ë¦¬í¬íŠ¸ í˜ì´ì§€
- ì•Œë¦¼ ì„¤ì • í˜ì´ì§€`
        },
        'ìˆ˜ì—… ê´€ë ¨ë„êµ¬': {
          features: `- ë¡œê·¸ì¸/íšŒì›ê°€ì…
- ìˆ˜ì—… ê³„íšì„œ ì‘ì„± ë° ê´€ë¦¬
- í•™ìƒ í‰ê°€ ì ìˆ˜ ê´€ë¦¬
- ìˆ˜ì—… ìë£Œ ì—…ë¡œë“œ ë° ê´€ë¦¬

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- ìˆ˜ì—… ê³„íšì„œ í…œí”Œë¦¿ ê´€ë¦¬
- í•™ìƒë³„ í‰ê°€ ì ìˆ˜ ìë™ ê³„ì‚°
- ìˆ˜ì—… ìë£Œ ë¶„ë¥˜ ë° ê²€ìƒ‰
- í‰ê°€ ê¸°ì¤€í‘œ ìë™ ìƒì„± ë° ì ìš©`,
          ui: `Vibe: ê¹”ë”í•˜ê³  ì²´ê³„ì ì¸ ìŠ¤íƒ€ì¼

UI êµ¬ì„±:
- ìˆ˜ì—… ëª©ë¡ ë° ìº˜ë¦°ë” ë·°
- ìˆ˜ì—… ê³„íšì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€
- í‰ê°€ ì ìˆ˜ ì…ë ¥ ë° ê´€ë¦¬ í˜ì´ì§€
- ìˆ˜ì—… ìë£Œ ë¼ì´ë¸ŒëŸ¬ë¦¬
- í†µê³„ ëŒ€ì‹œë³´ë“œ`
        },
        'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬': {
          features: `- ë¡œê·¸ì¸/íšŒì›ê°€ì…
- ë¬¸ì„œ ì‘ì„± ë° ê´€ë¦¬
- í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ìë™ ë³´ê³ ì„œ ìƒì„±

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- ë¬¸ì„œ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ìë™ ë³´ê³ ì„œ ìƒì„± ì—”ì§„
- ë°ì´í„° ë¶„ì„ ë° ì‹œê°í™”
- ì¼ì • ê´€ë¦¬ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ`,
          ui: `Vibe: ê¹”ë”í•˜ê³  íš¨ìœ¨ì ì¸ ìŠ¤íƒ€ì¼

UI êµ¬ì„±:
- ë©”ì¸ ëŒ€ì‹œë³´ë“œ (ìµœê·¼ ë¬¸ì„œ, í†µê³„)
- ë¬¸ì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€
- í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ë°ì´í„° ê´€ë¦¬ í˜ì´ì§€
- ì¼ì • ê´€ë¦¬ ìº˜ë¦°ë”`
        }
      };
      
      const structureExample = structureExamples[formData.toolType] || structureExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
      
      // ì„ì‹œ ì €ì¥ìš© ë°ì´í„°
      const tempData = {
        features: formData.structuredData.features || '',
        ui: formData.structuredData.ui || ''
      };
      
      const modalId = 'example-modal-fullscreen-5';
      let modal = document.getElementById(modalId);
      
      if (!modal) {
        modal = document.createElement('div');
        modal.id = modalId;
        document.body.appendChild(modal);
      }
      
      modal.className = 'fixed inset-0 bg-black/60 z-50 flex flex-col opacity-0 transition-opacity duration-300';
      modal.innerHTML = `
        <div class="flex-1 flex flex-col bg-white overflow-hidden">
          <!-- ëª¨ë‹¬ í—¤ë” -->
          <div class="bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4 flex justify-between items-center shadow-lg">
            <h2 class="text-xl sm:text-2xl font-bold text-white">ì˜ˆì‹œë³´ê¸° ëª¨ë“œ</h2>
            <button onclick="closeExampleModal(5)" class="text-white/90 hover:text-white text-3xl font-bold transition-transform hover:scale-110">Ã—</button>
          </div>
          
          <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
          <div class="flex-1 flex overflow-hidden">
            <!-- ì™¼ìª½: ë©”ì¸ ì½˜í…ì¸  (í¸ì§‘ ê°€ëŠ¥) -->
            <div class="flex-1 overflow-y-auto p-6 bg-slate-50">
              <div class="max-w-4xl mx-auto space-y-6">
                <h3 class="text-2xl font-bold text-slate-900 mb-6">ë©”ì¸í˜ì´ì§€</h3>
                
                <!-- ë‚´ê°€ ì…ë ¥í•œ ë‚´ìš© -->
                <div class="bg-white rounded-2xl border-2 border-slate-300 shadow-lg p-6 mb-6">
                  <h4 class="text-lg font-bold text-slate-700 uppercase tracking-wider mb-4">ë‚´ê°€ ì…ë ¥í•œ ë‚´ìš©</h4>
                  <div class="space-y-4 text-base">
                    <div>
                      <span class="font-bold block text-slate-900 mb-2">Pain Point:</span>
                      <p class="text-slate-700 leading-relaxed">${formData.painPoint || 'ì…ë ¥ ì—†ìŒ'}</p>
                    </div>
                    <div>
                      <span class="font-bold block text-slate-900 mb-2">Solution:</span>
                      <p class="text-slate-700 leading-relaxed">${formData.solutionMethod || 'ì…ë ¥ ì—†ìŒ'}</p>
                    </div>
                    <div>
                      <span class="font-bold block text-slate-900 mb-2">Features:</span>
                      <pre class="whitespace-pre-wrap font-sans text-slate-700 leading-relaxed">${formData.features || 'ì…ë ¥ ì—†ìŒ'}</pre>
                    </div>
                    <div>
                      <span class="font-bold block text-slate-900 mb-2">ì‘ë™ ê³¼ì •:</span>
                      <pre class="whitespace-pre-wrap font-sans text-slate-700 leading-relaxed">${formData.workflow || 'ì…ë ¥ ì—†ìŒ'}</pre>
                    </div>
                  </div>
                </div>
                
                <!-- AI êµ¬ì¡°í™” ì´ˆì•ˆ (í¸ì§‘ ê°€ëŠ¥) -->
                <div class="bg-white rounded-2xl border-2 border-purple-300 shadow-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-purple-100 to-purple-50 px-6 py-4 flex justify-between items-center border-b-2 border-purple-200">
                    <h4 class="text-lg font-bold text-purple-700 uppercase tracking-wider flex items-center gap-2">
                      ${Icons.Sparkles} AI êµ¬ì¡°í™” ì´ˆì•ˆ
                    </h4>
                    <span class="text-sm text-slate-500 bg-slate-100 px-3 py-1 rounded-full font-medium">ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥</span>
                  </div>
                  
                  <div class="p-6 space-y-4">
                    <div>
                      <div class="bg-gradient-to-r from-purple-100 to-purple-50 px-4 py-2 text-sm font-bold text-purple-900 border-b-2 border-purple-200 mb-3">
                        Features & Logic
                      </div>
                      <textarea 
                        id="modal-features-edit"
                        class="w-full min-h-[200px] p-4 text-base border-2 border-slate-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none leading-relaxed"
                      >${tempData.features}</textarea>
                    </div>
                    
                    <div>
                      <div class="bg-gradient-to-r from-blue-100 to-blue-50 px-4 py-2 text-sm font-bold text-blue-900 border-b-2 border-blue-200 mb-3">
                        UI & Vibe
                      </div>
                      <textarea 
                        id="modal-ui-edit"
                        class="w-full min-h-[150px] p-4 text-base border-2 border-slate-300 rounded-lg focus:border-blue-500 focus:outline-none resize-none leading-relaxed"
                      >${tempData.ui}</textarea>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- ì˜¤ë¥¸ìª½: ì˜ˆì‹œ íŒ¨ë„ -->
            <div class="w-full lg:w-96 xl:w-[450px] bg-white border-l-2 border-slate-200 overflow-y-auto">
              <div class="p-6 space-y-6">
                <h3 class="text-xl font-bold text-slate-900 mb-4">ì˜ˆì‹œ</h3>
                
                <div class="bg-purple-50 p-4 rounded-lg border-2 border-purple-200">
                  <h4 class="text-base font-bold text-purple-900 mb-3">Features & Logic ì˜ˆì‹œ:</h4>
                  <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-purple-100 max-h-[300px] overflow-y-auto">${structureExample.features}</pre>
                </div>
                
                <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
                  <h4 class="text-base font-bold text-blue-900 mb-3">UI & Vibe ì˜ˆì‹œ:</h4>
                  <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-blue-100 max-h-[300px] overflow-y-auto">${structureExample.ui}</pre>
                </div>
                
                <div class="bg-slate-50 p-4 rounded-lg border-2 border-slate-200">
                  <p class="text-sm text-slate-700"><strong>ğŸ’¡ íŒ:</strong> ìœ„ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì—¬ ${formData.toolType}ì— ë§ê²Œ êµ¬ì¡°ë¥¼ ì •ë¦¬í•´ë³´ì„¸ìš”. ê° ì„¹ì…˜ì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•˜ê³ , ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê³ ë ¤í•˜ì—¬ ì‘ì„±í•˜ë©´ ë” ì¢‹ìŠµë‹ˆë‹¤.</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- ëª¨ë‹¬ í‘¸í„° (ì €ì¥ ë²„íŠ¼) -->
          <div class="bg-slate-100 px-6 py-4 flex justify-end gap-4 border-t-2 border-slate-300">
            <button onclick="closeExampleModal(5)" class="px-6 py-2 bg-slate-300 hover:bg-slate-400 text-slate-900 font-bold rounded-lg transition-all">
              ì·¨ì†Œ
            </button>
            <button onclick="saveModalChanges(5)" class="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105">
              ì €ì¥
            </button>
          </div>
        </div>
      `;
      
      // body ìŠ¤í¬ë¡¤ ë°©ì§€
      document.body.style.overflow = 'hidden';
      
      // ëª¨ë‹¬ ì—´ê¸° ì• ë‹ˆë©”ì´ì…˜
      requestAnimationFrame(() => {
        modal.classList.remove('opacity-0');
        modal.classList.add('opacity-100');
      });
      }
    }
    
    // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
    function closeExampleModal(step) {
      const modalId = `example-modal-fullscreen-${step}`;
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.remove('opacity-100');
        modal.classList.add('opacity-0');
        setTimeout(() => {
          modal.remove();
          // body ìŠ¤í¬ë¡¤ ë³µì›
          document.body.style.overflow = '';
        }, 300);
      }
    }
    
    // ëª¨ë‹¬ ë³€ê²½ì‚¬í•­ ì €ì¥ í•¨ìˆ˜
    function saveModalChanges(step) {
      if (step === 4) {
        const userInfoEdit = document.getElementById('modal-userInfo-edit');
        const featuresEdit = document.getElementById('modal-features-edit-4');
        const vibeEdit = document.getElementById('modal-vibe-edit-4');
        const workflowEdit = document.getElementById('modal-workflow-edit-4');
        
        if (userInfoEdit) formData.userInfo = userInfoEdit.value;
        if (featuresEdit) formData.features = featuresEdit.value;
        if (vibeEdit) formData.vibe = vibeEdit.value;
        if (workflowEdit) formData.workflow = workflowEdit.value;
        
        // step 4 ë‹¤ì‹œ ë Œë”ë§
        renderStep();
        
        // ëª¨ë‹¬ ë‹«ê¸°
        closeExampleModal(4);
      } else if (step === 5) {
        const featuresEdit = document.getElementById('modal-features-edit');
        const uiEdit = document.getElementById('modal-ui-edit');
        
        if (featuresEdit && uiEdit) {
          formData.structuredData.features = featuresEdit.value;
          formData.structuredData.ui = uiEdit.value;
          
          // step 5 ë‹¤ì‹œ ë Œë”ë§
          renderStep();
          
          // ëª¨ë‹¬ ë‹«ê¸°
          closeExampleModal(5);
        }
      }
    }

    // ëª¨ë°”ì¼ìš© ì˜ˆì‹œ ëª¨ë‹¬
    function showExampleModal(step) {
      const modalId = `example-modal-${step}`;
      let modal = document.getElementById(modalId);
      
      if (!modal) {
        modal = document.createElement('div');
        modal.id = modalId;
        modal.className = 'fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4';
        document.body.appendChild(modal);
      }
      
      const exampleForTool = toolExamples[formData.toolType] || toolExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
      let modalContent = '';
      
      if (step === 4) {
        modalContent = `
          <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto p-6 animate-in">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-xl font-bold text-slate-900">${formData.toolType} ì˜ˆì‹œ</h3>
              <button onclick="document.getElementById('${modalId}').remove()" class="text-slate-400 hover:text-slate-600 text-2xl font-bold">Ã—</button>
            </div>
            <div class="space-y-4">
              <div class="bg-purple-50 p-4 rounded-lg border-2 border-purple-200">
                <h4 class="text-sm font-bold text-purple-900 mb-2">ì£¼ìš” ê¸°ëŠ¥ (Features) ì˜ˆì‹œ:</h4>
                <pre class="bg-white p-3 rounded-lg text-xs whitespace-pre-wrap border border-purple-100">${exampleForTool.features}</pre>
              </div>
              <div class="bg-pink-50 p-4 rounded-lg border-2 border-pink-200">
                <h4 class="text-sm font-bold text-pink-900 mb-2">ë””ìì¸ ë°”ì´ë¸Œ (Vibe) ì˜ˆì‹œ:</h4>
                <pre class="bg-white p-3 rounded-lg text-xs whitespace-pre-wrap border border-pink-100">${exampleForTool.vibe}</pre>
              </div>
              <div class="bg-slate-50 p-4 rounded-lg border-2 border-slate-200">
                <h4 class="text-sm font-bold text-slate-900 mb-2">ë„êµ¬ & ê·œì¹™ ì˜ˆì‹œ:</h4>
                <pre class="bg-white p-3 rounded-lg text-xs whitespace-pre-wrap border border-slate-100">${exampleForTool.rules}</pre>
              </div>
              <div class="bg-emerald-50 p-4 rounded-lg border-2 border-emerald-200">
                <h4 class="text-sm font-bold text-emerald-900 mb-2">ì‘ë™ ê³¼ì • ì˜ˆì‹œ:</h4>
                <pre class="bg-white p-3 rounded-lg text-xs whitespace-pre-wrap border border-emerald-100">${exampleForTool.workflow || 'ë¡œë”© ì¤‘...'}</pre>
              </div>
            </div>
          </div>
        `;
      } else if (step === 5) {
        const structureExamples = {
          'í•™ê¸‰ê²½ì˜ë„êµ¬': {
            features: `${exampleForTool.features}\n\nì¶”ê°€ ê³ ë ¤ì‚¬í•­:\n- í•™ìƒë³„ ê°œì¸ ì •ë³´ ê´€ë¦¬\n- ì¶œì„ í†µê³„ ë° ê·¸ë˜í”„ í‘œì‹œ`,
            ui: `${exampleForTool.vibe}\n\nUI êµ¬ì„±:\n- í•™ê¸‰ ëŒ€ì‹œë³´ë“œ\n- í•™ìƒ ëª©ë¡ ë° ê°œë³„ ìƒì„¸ í˜ì´ì§€`
          },
          'ìˆ˜ì—… ê´€ë ¨ë„êµ¬': {
            features: `${exampleForTool.features}\n\nì¶”ê°€ ê³ ë ¤ì‚¬í•­:\n- ìˆ˜ì—… ê³„íšì„œ í…œí”Œë¦¿ ê´€ë¦¬\n- í•™ìƒë³„ í‰ê°€ ì ìˆ˜ ìë™ ê³„ì‚°`,
            ui: `${exampleForTool.vibe}\n\nUI êµ¬ì„±:\n- ìˆ˜ì—… ëª©ë¡ ë° ìº˜ë¦°ë” ë·°\n- ìˆ˜ì—… ê³„íšì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€`
          },
          'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬': {
            features: `${exampleForTool.features}\n\nì¶”ê°€ ê³ ë ¤ì‚¬í•­:\n- ë¬¸ì„œ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬\n- ìë™ ë³´ê³ ì„œ ìƒì„± ì—”ì§„`,
            ui: `${exampleForTool.vibe}\n\nUI êµ¬ì„±:\n- ë©”ì¸ ëŒ€ì‹œë³´ë“œ\n- ë¬¸ì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€`
          }
        };
        const structureExample = structureExamples[formData.toolType] || structureExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
        
        modalContent = `
          <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto p-6 animate-in">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-xl font-bold text-slate-900">${formData.toolType} ì˜ˆì‹œ</h3>
              <button onclick="document.getElementById('${modalId}').remove()" class="text-slate-400 hover:text-slate-600 text-2xl font-bold">Ã—</button>
            </div>
            <div class="space-y-4">
              <div class="bg-purple-50 p-4 rounded-lg border-2 border-purple-200">
                <h4 class="text-sm font-bold text-purple-900 mb-2">Features & Logic ì˜ˆì‹œ:</h4>
                <pre class="bg-white p-3 rounded-lg text-xs whitespace-pre-wrap border border-purple-100">${structureExample.features}</pre>
              </div>
              <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
                <h4 class="text-sm font-bold text-blue-900 mb-2">UI & Vibe ì˜ˆì‹œ:</h4>
                <pre class="bg-white p-3 rounded-lg text-xs whitespace-pre-wrap border border-blue-100">${structureExample.ui}</pre>
              </div>
            </div>
          </div>
        `;
      }
      
      modal.innerHTML = modalContent;
      modal.classList.remove('hidden');
    }

    // Gemini APIë¡œ ë™ì  ì˜ˆì‹œ ë¡œë“œ
    async function loadDynamicExamples(step) {
      if (!formData.toolType || step !== 4) return;
      
      const toolType = formData.toolType;
      const fields = ['features', 'vibe', 'rules', 'workflow'];
      
      for (const field of fields) {
        const element = document.getElementById(`example-${field}-${step}`);
        if (element) {
          // ë¡œë”© í‘œì‹œ
          element.textContent = 'AIê°€ ì˜ˆì‹œë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...';
          
          try {
            const example = await generateToolExample(field, toolType);
            if (example) {
              element.textContent = example;
            }
          } catch (error) {
            console.error(`ì˜ˆì‹œ ìƒì„± ì‹¤íŒ¨ (${field}):`, error);
            // ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì˜ˆì‹œ ì‚¬ìš©
            const baseExample = toolExamples[toolType]?.[field] || '';
            element.textContent = baseExample;
          }
        }
      }
    }

    // ì˜ˆì‹œ ëª¨ë‹¬ í•¨ìˆ˜
    function toggleExampleModal(step) {
      const modalId = 'example-modal';
      let modal = document.getElementById(modalId);
      
      if (!modal) {
        modal = document.createElement('div');
        modal.id = modalId;
        modal.className = 'hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4';
        document.body.appendChild(modal);
      }

      const exampleForTool = toolExamples[formData.toolType] || toolExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
      
      let exampleContent = '';
      if (step === 4) {
        exampleContent = `
          <div class="space-y-6">
            <div class="bg-purple-50 p-4 rounded-lg border-2 border-purple-200">
              <h4 class="text-lg font-bold text-purple-900 mb-3">ì£¼ìš” ê¸°ëŠ¥ (Features) ì˜ˆì‹œ:</h4>
              <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-purple-100">${exampleForTool.features}</pre>
              <p class="text-xs text-purple-700 mt-2">ğŸ’¡ í•µì‹¬ ê¸°ëŠ¥ 3-5ê°œë¥¼ ëª…í™•í•˜ê²Œ ë‚˜ì—´í•˜ì„¸ìš”. ê° ê¸°ëŠ¥ì€ í•œ ì¤„ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±í•©ë‹ˆë‹¤.</p>
                </div>
            
            <div class="bg-pink-50 p-4 rounded-lg border-2 border-pink-200">
              <h4 class="text-lg font-bold text-pink-900 mb-3">ë””ìì¸ ë°”ì´ë¸Œ (Vibe) ì˜ˆì‹œ:</h4>
              <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-pink-100">${exampleForTool.vibe}</pre>
              <p class="text-xs text-pink-700 mt-2">ğŸ’¡ í˜•ìš©ì‚¬ 3ê°œë¡œ ë””ìì¸ ëŠë‚Œì„ í‘œí˜„í•˜ì„¸ìš”. ìƒ‰ìƒ, ë¶„ìœ„ê¸°, ìŠ¤íƒ€ì¼ì„ í¬í•¨í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.</p>
                </div>
            
            <div class="bg-slate-50 p-4 rounded-lg border-2 border-slate-200">
              <h4 class="text-lg font-bold text-slate-900 mb-3">ë„êµ¬ & ê·œì¹™ (.cursorrules) ì˜ˆì‹œ:</h4>
              <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-slate-100">${exampleForTool.rules}</pre>
              <p class="text-xs text-slate-700 mt-2">ğŸ’¡ ì‚¬ìš©í•  ê¸°ìˆ  ìŠ¤íƒê³¼ ì½”ë”© ê·œì¹™ì„ ëª…ì‹œí•˜ì„¸ìš”. í”„ë ˆì„ì›Œí¬, ì–¸ì–´, ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.</p>
            </div>
            
            <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
              <h4 class="text-lg font-bold text-blue-900 mb-3">ì‚¬ìš©ì ì •ë³´ ì˜ˆì‹œ:</h4>
              <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-blue-100">ì¤‘í•™êµ 2í•™ë…„ ë‹´ì„, ìˆ˜í•™ ë‹´ë‹¹, 30ëª… í•™ê¸‰ ê´€ë¦¬

ë˜ëŠ”

ì´ˆë“±í•™êµ 3í•™ë…„ ë‹´ì„, ì „ê³¼ëª© ë‹´ë‹¹, 25ëª… í•™ê¸‰

ë˜ëŠ”

ê³ ë“±í•™êµ 1í•™ë…„ ë‹´ì„, ì˜ì–´ ë‹´ë‹¹, 35ëª… í•™ê¸‰</pre>
              <p class="text-xs text-blue-700 mt-2">ğŸ’¡ ì§ê¸‰, ë‹´ë‹¹ ê³¼ëª©, í•™ê¸‰ ê·œëª¨ ë“± ë„êµ¬ ê°œë°œì— í•„ìš”í•œ êµ¬ì²´ì ì¸ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
          </div>
          </div>
        `;
      } else if (step === 5) {
        const structureExamples = {
          'í•™ê¸‰ê²½ì˜ë„êµ¬': {
            features: `${exampleForTool.features}

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- í•™ìƒë³„ ê°œì¸ ì •ë³´ ê´€ë¦¬ (ì´ë¦„, í•™ë²ˆ, ì—°ë½ì²˜)
- ì¶œì„ í†µê³„ ë° ê·¸ë˜í”„ í‘œì‹œ
- ìƒí™œê¸°ë¡ë¶€ ìë™ ì—°ë™ ê¸°ëŠ¥
- ë¶€ëª¨ë‹˜ ì•Œë¦¼ ì‹œìŠ¤í…œ (SMS/ì´ë©”ì¼)`,
            ui: `${exampleForTool.vibe}

UI êµ¬ì„±:
- í•™ê¸‰ ëŒ€ì‹œë³´ë“œ (ì „ì²´ ì¶œì„ í˜„í™©)
- í•™ìƒ ëª©ë¡ ë° ê°œë³„ ìƒì„¸ í˜ì´ì§€
- ì¶œì„ ì²´í¬ ì¸í„°í˜ì´ìŠ¤ (QRì½”ë“œ/ë²„íŠ¼)
- í†µê³„ ë° ë¦¬í¬íŠ¸ í˜ì´ì§€
- ì•Œë¦¼ ì„¤ì • í˜ì´ì§€`
          },
          'ìˆ˜ì—… ê´€ë ¨ë„êµ¬': {
            features: `${exampleForTool.features}

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- ìˆ˜ì—… ê³„íšì„œ í…œí”Œë¦¿ ê´€ë¦¬
- í•™ìƒë³„ í‰ê°€ ì ìˆ˜ ìë™ ê³„ì‚°
- ìˆ˜ì—… ìë£Œ ë¶„ë¥˜ ë° ê²€ìƒ‰
- í‰ê°€ ê¸°ì¤€í‘œ ìë™ ìƒì„± ë° ì ìš©`,
            ui: `${exampleForTool.vibe}

UI êµ¬ì„±:
- ìˆ˜ì—… ëª©ë¡ ë° ìº˜ë¦°ë” ë·°
- ìˆ˜ì—… ê³„íšì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€
- í‰ê°€ ì ìˆ˜ ì…ë ¥ ë° ê´€ë¦¬ í˜ì´ì§€
- ìˆ˜ì—… ìë£Œ ë¼ì´ë¸ŒëŸ¬ë¦¬
- í†µê³„ ëŒ€ì‹œë³´ë“œ`
          },
          'ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬': {
            features: `${exampleForTool.features}

ì¶”ê°€ ê³ ë ¤ì‚¬í•­:
- ë¬¸ì„œ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ìë™ ë³´ê³ ì„œ ìƒì„± ì—”ì§„
- ë°ì´í„° ë¶„ì„ ë° ì‹œê°í™”
- ì¼ì • ê´€ë¦¬ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ`,
            ui: `${exampleForTool.vibe}

UI êµ¬ì„±:
- ë©”ì¸ ëŒ€ì‹œë³´ë“œ (ìµœê·¼ ë¬¸ì„œ, í†µê³„)
- ë¬¸ì„œ ì‘ì„±/í¸ì§‘ í˜ì´ì§€
- í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ë°ì´í„° ê´€ë¦¬ í˜ì´ì§€
- ì¼ì • ê´€ë¦¬ ìº˜ë¦°ë”`
          }
        };
        
        const structureExample = structureExamples[formData.toolType] || structureExamples['ì—…ë¬´íš¨ìœ¨í™” ë„êµ¬'];
        
        exampleContent = `
          <div class="space-y-6">
            <div class="bg-purple-50 p-4 rounded-lg border-2 border-purple-200">
              <h4 class="text-lg font-bold text-purple-900 mb-3">Features & Logic ì˜ˆì‹œ:</h4>
              <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-purple-100">${structureExample.features}</pre>
            </div>
            
            <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
              <h4 class="text-lg font-bold text-blue-900 mb-3">UI & Vibe ì˜ˆì‹œ:</h4>
              <pre class="bg-white p-4 rounded-lg text-sm whitespace-pre-wrap border border-blue-100">${structureExample.ui}</pre>
          </div>
            
            <div class="bg-slate-50 p-4 rounded-lg border-2 border-slate-200">
              <p class="text-sm text-slate-700"><strong>ğŸ’¡ íŒ:</strong> ìœ„ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì—¬ ${formData.toolType}ì— ë§ê²Œ êµ¬ì¡°ë¥¼ ì •ë¦¬í•´ë³´ì„¸ìš”. ê° ì„¹ì…˜ì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•˜ê³ , ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê³ ë ¤í•˜ì—¬ ì‘ì„±í•˜ë©´ ë” ì¢‹ìŠµë‹ˆë‹¤.</p>
          </div>
        </div>
        `;
      }

      modal.innerHTML = `
        <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto p-8 animate-in">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-2xl font-bold text-slate-900">${formData.toolType} ì˜ˆì‹œ</h3>
            <button onclick="document.getElementById('example-modal').classList.add('hidden')" class="text-slate-400 hover:text-slate-600 text-2xl font-bold">Ã—</button>
          </div>
          ${exampleContent}
          <div class="mt-6 flex justify-end">
            <button onclick="document.getElementById('example-modal').classList.add('hidden')" class="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition-colors">
              ë‹«ê¸°
            </button>
      </div>
    </div>
      `;
      
      modal.classList.toggle('hidden');
    }

    // Initialize
    renderStep();
    updateProgress();
  </script>
</body>
</html>