

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polynomial Duel - ë‹¤í•­ì‹ ì¹´ë“œ ë°°í‹€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes cardFlip {
            0% { transform: scale(1) rotateY(0deg); }
            50% { transform: scale(1.1) rotateY(180deg); }
            100% { transform: scale(1) rotateY(0deg); }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
        }
        
        .card-flip { animation: cardFlip 0.6s ease-in-out; }
        .bounce { animation: bounce 0.6s ease-in-out; }
        .glow { animation: glow 1s ease-in-out infinite; }
        
        .selected-card {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
        }
        
        .player-turn {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-100 via-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- ê²Œì„ ì œëª© -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 mb-2">
                Polynomial Duel
            </h1>
            <p class="text-xl text-gray-700 font-semibold">ë‹¤í•­ì‹ ì¹´ë“œ ë°°í‹€</p>
            
            <!-- ê²Œì„ ë£° ì„¤ëª… -->
            <div class="bg-white rounded-xl shadow-lg p-6 mt-6 max-w-4xl mx-auto">
                <h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ® ê²Œì„ ë£°</h3>
                <div class="grid md:grid-cols-2 gap-6 text-left">
                    <div>
                        <h4 class="font-bold text-blue-600 mb-2">ğŸ“‹ ê¸°ë³¸ ê·œì¹™</h4>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>â€¢ ê° í”Œë ˆì´ì–´ëŠ” 3ì¥ì˜ ì¹´ë“œë¥¼ ì„ íƒ</li>
                            <li>â€¢ ì„ íƒí•œ ì¹´ë“œë“¤ë¡œ ë‹¤í•­ì‹ì„ ì™„ì„±</li>
                            <li>â€¢ ë†’ì€ ì ìˆ˜ë¥¼ ì–»ì€ í”Œë ˆì´ì–´ê°€ ë¼ìš´ë“œ ìŠ¹ë¦¬</li>
                            <li>â€¢ 3ë¼ìš´ë“œ ì¤‘ 2ìŠ¹ì„ ë¨¼ì € ë‹¬ì„±í•˜ë©´ ìµœì¢… ìŠ¹ë¦¬</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-purple-600 mb-2">ğŸ† ì ìˆ˜ ê³„ì‚°</h4>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>â€¢ ê¸°ë³¸ ì ìˆ˜: ì°¨ìˆ˜ Ã— |ê³„ìˆ˜|</li>
                            <li>â€¢ ë™ë¥˜í•­ ë³´ë„ˆìŠ¤: +2ì </li>
                            <li>â€¢ ì˜ˆì‹œ: 2xÂ² + 3x â†’ (2Ã—2) + (1Ã—3) = 7ì </li>
                            <li>â€¢ ë™ë¥˜í•­ ì˜ˆì‹œ: xÂ² + 2xÂ² â†’ 3xÂ² = 6ì  + 2ì  = 8ì </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¼ìš´ë“œ ë° ì ìˆ˜íŒ -->
        <div class="flex justify-center mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="text-center mb-4">
                    <h3 class="text-xl font-bold text-purple-600 mb-2">ë¼ìš´ë“œ <span id="currentRound">1</span>/3</h3>
                    <div class="flex justify-center space-x-4 mb-4">
                        <div class="text-center">
                            <div class="text-sm text-gray-600">Player 1 ìŠ¹ìˆ˜</div>
                            <div class="text-2xl font-bold text-blue-600" id="player1Wins">0</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm text-gray-600">Player 2 ìŠ¹ìˆ˜</div>
                            <div class="text-2xl font-bold text-red-600" id="player2Wins">0</div>
                        </div>
                    </div>
                </div>
                <div class="flex space-x-12">
                    <div class="text-center">
                        <h3 class="text-lg font-bold text-blue-600 mb-2">Player 1</h3>
                        <div class="text-3xl font-bold text-blue-800" id="player1Score">0</div>
                        <div class="text-sm text-gray-600 mt-1" id="player1Polynomial">ë‹¤í•­ì‹ ëŒ€ê¸°ì¤‘...</div>
                    </div>
                    <div class="text-center">
                        <h3 class="text-lg font-bold text-red-600 mb-2">Player 2</h3>
                        <div class="text-3xl font-bold text-red-800" id="player2Score">0</div>
                        <div class="text-sm text-gray-600 mt-1" id="player2Polynomial">ë‹¤í•­ì‹ ëŒ€ê¸°ì¤‘...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í˜„ì¬ í”Œë ˆì´ì–´ í‘œì‹œ -->
        <div class="text-center mb-6">
            <div id="currentPlayerDisplay" class="inline-block px-6 py-3 rounded-full text-white font-bold text-lg player-turn">
                Player 1ì˜ ì°¨ë¡€
            </div>
        </div>

        <!-- ì„ íƒëœ ì¹´ë“œ í‘œì‹œ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h3 class="text-lg font-bold text-gray-800 mb-4 text-center">ì¹´ë“œ ì„ íƒ</h3>
            <div id="selectedCards" class="flex justify-center space-x-4 mb-4 min-h-[60px] items-center">
                <div class="text-gray-500">ì¹´ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš” (3ì¥)</div>
            </div>
            <div class="text-center">
                <button id="completePolynomial" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                    ë‹¤í•­ì‹ ì™„ì„±
                </button>
            </div>
        </div>

        <!-- ì¹´ë“œ ì„ íƒ ì˜ì—­ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h3 class="text-lg font-bold text-gray-800 mb-4 text-center">ë‹¤í•­ì‹ í•­ ì¹´ë“œ</h3>
            <div id="cardGrid" class="grid grid-cols-2 md:grid-cols-5 gap-4">
                <!-- ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ê²Œì„ ì»¨íŠ¸ë¡¤ -->
        <div class="text-center space-x-4">
            <button id="nextRound" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                ë‹¤ìŒ ë¼ìš´ë“œ
            </button>
            <button id="newGame" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300">
                ìƒˆ ê²Œì„ ì‹œì‘
            </button>
        </div>

        <!-- ê²°ê³¼ ëª¨ë‹¬ -->
        <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white rounded-xl p-8 max-w-md mx-4 text-center">
                <h2 class="text-2xl font-bold mb-4" id="resultTitle">ê²Œì„ ê²°ê³¼</h2>
                <div id="resultContent" class="mb-6">
                    <!-- ê²°ê³¼ ë‚´ìš© -->
                </div>
                <button id="closeResult" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg">
                    í™•ì¸
                </button>
            </div>
        </div>

        <!-- ì œì‘ì ì„œëª… -->
        <div class="mt-16 mb-8 text-center">
            <div class="bg-white rounded-xl shadow-lg p-6 max-w-md mx-auto border-2 border-gray-200">
                <div class="text-lg font-bold text-gray-800 mb-2">
                    í–‰ë³µí•œ ìˆ˜í•™, í•¨ê»˜ ë§Œë“¤ì–´ìš” ğŸ˜Š
                </div>
                <div class="text-sm text-gray-600">
                    Â© í–‰ë³µí•œìœ¤ìŒ¤ | 
                    <a href="https://blog.naver.com/happy_yoonssam" 
                       target="_blank" 
                       class="text-gray-700 hover:text-black underline transition-colors duration-300">
                        https://blog.naver.com/happy_yoonssam
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        class PolynomialDuel {
            constructor() {
                // ê²Œì„ ì‹œì‘ ì‹œ ëœë¤í•˜ê²Œ ì‹œì‘ í”Œë ˆì´ì–´ ê²°ì •
                this.currentPlayer = Math.random() < 0.5 ? 1 : 2;
                this.selectedCards = [];
                this.player1Cards = [];
                this.player2Cards = [];
                this.player1Score = 0;
                this.player2Score = 0;
                this.gamePhase = 'selecting'; // selecting, completed
                this.currentRound = 1;
                this.player1Wins = 0;
                this.player2Wins = 0;
                this.usedCardIndices = new Set(); // ì‚¬ìš©ëœ ì¹´ë“œ ì¸ë±ìŠ¤ ì¶”ì 
                
                // ë‹¤í•­ì‹ ì¡°í•© ì¹´ë“œë“¤ (2ê°œ ì´ìƒì˜ í•­ìœ¼ë¡œ êµ¬ì„±)
                this.cards = [
                    { 
                        display: '2xÂ² + 3x', 
                        terms: [
                            { coefficient: 2, degree: 2 },
                            { coefficient: 3, degree: 1 }
                        ]
                    },
                    { 
                        display: '5x - 4', 
                        terms: [
                            { coefficient: 5, degree: 1 },
                            { coefficient: -4, degree: 0 }
                        ]
                    },
                    { 
                        display: 'xÂ³ - 2xÂ²', 
                        terms: [
                            { coefficient: 1, degree: 3 },
                            { coefficient: -2, degree: 2 }
                        ]
                    },
                    { 
                        display: '3xÂ² + 7', 
                        terms: [
                            { coefficient: 3, degree: 2 },
                            { coefficient: 7, degree: 0 }
                        ]
                    },
                    { 
                        display: '-xÂ² + 4x', 
                        terms: [
                            { coefficient: -1, degree: 2 },
                            { coefficient: 4, degree: 1 }
                        ]
                    },
                    { 
                        display: '6x + 2', 
                        terms: [
                            { coefficient: 6, degree: 1 },
                            { coefficient: 2, degree: 0 }
                        ]
                    },
                    { 
                        display: '4xÂ³ - x', 
                        terms: [
                            { coefficient: 4, degree: 3 },
                            { coefficient: -1, degree: 1 }
                        ]
                    },
                    { 
                        display: '-3xÂ² - 5', 
                        terms: [
                            { coefficient: -3, degree: 2 },
                            { coefficient: -5, degree: 0 }
                        ]
                    },
                    { 
                        display: '2xÂ³ + xÂ²', 
                        terms: [
                            { coefficient: 2, degree: 3 },
                            { coefficient: 1, degree: 2 }
                        ]
                    },
                    { 
                        display: '8x - 3xÂ²', 
                        terms: [
                            { coefficient: 8, degree: 1 },
                            { coefficient: -3, degree: 2 }
                        ]
                    }
                ];
                
                this.init();
            }
            
            init() {
                this.createCardGrid();
                this.bindEvents();
                this.updateDisplay();
            }
            
            createCardGrid() {
                const cardGrid = document.getElementById('cardGrid');
                cardGrid.innerHTML = '';
                
                this.cards.forEach((card, index) => {
                    // ì‚¬ìš©ëœ ì¹´ë“œëŠ” ì•„ì˜ˆ í‘œì‹œí•˜ì§€ ì•ŠìŒ
                    if (this.usedCardIndices.has(index)) {
                        return;
                    }
                    
                    const cardElement = document.createElement('div');
                    cardElement.className = 'bg-gradient-to-br from-blue-400 to-blue-600 text-white p-4 rounded-lg cursor-pointer text-center font-bold text-sm card-hover transition-all duration-300';
                    cardElement.textContent = card.display;
                    cardElement.dataset.index = index;
                    cardElement.addEventListener('click', () => this.selectCard(index, cardElement));
                    
                    cardGrid.appendChild(cardElement);
                });
            }
            
            selectCard(index, element) {
                if (this.usedCardIndices.has(index)) return;
                
                // ì´ë¯¸ ì„ íƒëœ ì¹´ë“œì¸ì§€ í™•ì¸
                const selectedIndex = this.selectedCards.findIndex(card => card.originalIndex === index);
                
                if (selectedIndex !== -1) {
                    // ì¹´ë“œ ì„ íƒ ì·¨ì†Œ
                    this.selectedCards.splice(selectedIndex, 1);
                    element.classList.remove('selected-card');
                    element.classList.add('card-flip');
                    setTimeout(() => element.classList.remove('card-flip'), 600);
                } else {
                    // ìƒˆ ì¹´ë“œ ì„ íƒ (3ì¥ ì œí•œ)
                    if (this.selectedCards.length >= 3) return;
                    
                    // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                    element.classList.add('card-flip');
                    setTimeout(() => element.classList.remove('card-flip'), 600);
                    
                    // ì¹´ë“œ ì„ íƒ
                    this.selectedCards.push({...this.cards[index], originalIndex: index});
                    element.classList.add('selected-card');
                }
                
                this.updateSelectedCardsDisplay();
                
                // íš¨ê³¼ìŒ ì‹œë®¬ë ˆì´ì…˜ (ì‹œê°ì  í”¼ë“œë°±)
                element.classList.add('glow');
                setTimeout(() => element.classList.remove('glow'), 1000);
            }
            
            updateSelectedCardsDisplay() {
                const selectedCardsDiv = document.getElementById('selectedCards');
                
                if (this.selectedCards.length === 0) {
                    selectedCardsDiv.innerHTML = '<div class="text-gray-500">3ì¥ì˜ ì¹´ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>';
                } else {
                    const remainingCards = 3 - this.selectedCards.length;
                    const cardsHtml = this.selectedCards.map(card => 
                        `<div class="bg-blue-100 px-4 py-2 rounded-lg font-bold text-blue-800">${card.display}</div>`
                    ).join('');
                    
                    if (remainingCards > 0) {
                        selectedCardsDiv.innerHTML = cardsHtml + `<div class="text-gray-500 text-sm">ì•ìœ¼ë¡œ ${remainingCards}ì¥ ë” ì„ íƒí•˜ì„¸ìš”</div>`;
                    } else {
                        selectedCardsDiv.innerHTML = cardsHtml;
                    }
                }
                
                // ë‹¤í•­ì‹ ì™„ì„± ë²„íŠ¼ í™œì„±í™”
                const completeBtn = document.getElementById('completePolynomial');
                completeBtn.disabled = this.selectedCards.length !== 3;
            }
            
            completePolynomial() {
                if (this.selectedCards.length !== 3) return;
                
                // ì„ íƒëœ ì¹´ë“œë“¤ì„ ì‚¬ìš©ë¨ìœ¼ë¡œ í‘œì‹œ
                this.selectedCards.forEach(card => {
                    this.usedCardIndices.add(card.originalIndex);
                });
                
                // í˜„ì¬ í”Œë ˆì´ì–´ì˜ ì¹´ë“œ ì €ì¥
                if (this.currentPlayer === 1) {
                    this.player1Cards = [...this.selectedCards];
                    this.player1Score = this.calculateScore(this.selectedCards);
                    document.getElementById('player1Score').textContent = this.player1Score;
                    document.getElementById('player1Polynomial').textContent = this.formatPolynomial(this.selectedCards);
                } else {
                    this.player2Cards = [...this.selectedCards];
                    this.player2Score = this.calculateScore(this.selectedCards);
                    document.getElementById('player2Score').textContent = this.player2Score;
                    document.getElementById('player2Polynomial').textContent = this.formatPolynomial(this.selectedCards);
                }
                
                // ë‹¤ìŒ í”Œë ˆì´ì–´ë¡œ ì „í™˜ ë˜ëŠ” ë¼ìš´ë“œ ì™„ë£Œ
                if (this.player1Cards.length === 0 || this.player2Cards.length === 0) {
                    // ì•„ì§ í•œ í”Œë ˆì´ì–´ë§Œ ì™„ë£Œí•œ ê²½ìš° - ë‹¤ìŒ í”Œë ˆì´ì–´ë¡œ ì „í™˜
                    this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
                    this.resetForNextPlayer();
                } else {
                    // ë‘ í”Œë ˆì´ì–´ ëª¨ë‘ ì™„ë£Œí•œ ê²½ìš° - ë¼ìš´ë“œ ì™„ë£Œ
                    this.gamePhase = 'completed';
                    this.checkRoundComplete();
                }
                
                this.updateDisplay();
            }
            
            calculateScore(cards) {
                let score = 0;
                const termsByDegree = {};
                
                // ëª¨ë“  ì¹´ë“œì˜ ëª¨ë“  í•­ì„ ìˆ˜ì§‘í•˜ì—¬ ë™ë¥˜í•­ ê·¸ë£¹í™”
                cards.forEach(card => {
                    card.terms.forEach(term => {
                        if (!termsByDegree[term.degree]) {
                            termsByDegree[term.degree] = [];
                        }
                        termsByDegree[term.degree].push(term);
                    });
                });
                
                // ì ìˆ˜ ê³„ì‚°
                Object.keys(termsByDegree).forEach(degree => {
                    const terms = termsByDegree[degree];
                    const totalCoeff = terms.reduce((sum, term) => sum + term.coefficient, 0);
                    
                    // ê¸°ë³¸ ì ìˆ˜: ì°¨ìˆ˜ Ã— ê³„ìˆ˜ì˜ ì ˆëŒ“ê°’
                    score += parseInt(degree) * Math.abs(totalCoeff);
                    
                    // ë™ë¥˜í•­ ë³´ë„ˆìŠ¤ (2ê°œ ì´ìƒì˜ ê°™ì€ ì°¨ìˆ˜ í•­ì´ ìˆì„ ë•Œ)
                    if (terms.length > 1) {
                        score += 2;
                    }
                });
                
                return score;
            }
            
            formatPolynomial(cards) {
                const termsByDegree = {};
                
                // ëª¨ë“  ì¹´ë“œì˜ ëª¨ë“  í•­ì„ ìˆ˜ì§‘í•˜ì—¬ ë™ë¥˜í•­ ê·¸ë£¹í™”
                cards.forEach(card => {
                    card.terms.forEach(term => {
                        if (!termsByDegree[term.degree]) {
                            termsByDegree[term.degree] = 0;
                        }
                        termsByDegree[term.degree] += term.coefficient;
                    });
                });
                
                // ì°¨ìˆ˜ ìˆœìœ¼ë¡œ ì •ë ¬ (ë‚´ë¦¼ì°¨ìˆœ)
                const sortedDegrees = Object.keys(termsByDegree).sort((a, b) => b - a);
                
                let polynomial = '';
                sortedDegrees.forEach((degree, index) => {
                    const coeff = termsByDegree[degree];
                    if (coeff === 0) return;
                    
                    let term = '';
                    if (index > 0 && coeff > 0) term += '+';
                    
                    if (degree == 0) {
                        term += coeff;
                    } else if (degree == 1) {
                        if (coeff === 1) term += 'x';
                        else if (coeff === -1) term += '-x';
                        else term += coeff + 'x';
                    } else {
                        if (coeff === 1) term += 'xÂ²Â³â´âµâ¶â·â¸â¹'[degree - 2] || 'x^' + degree;
                        else if (coeff === -1) term += '-xÂ²Â³â´âµâ¶â·â¸â¹'[degree - 2] || '-x^' + degree;
                        else term += coeff + 'xÂ²Â³â´âµâ¶â·â¸â¹'[degree - 2] || coeff + 'x^' + degree;
                    }
                    
                    polynomial += term;
                });
                
                return polynomial || '0';
            }
            
            resetForNextPlayer() {
                this.selectedCards = [];
                this.updateSelectedCardsDisplay();
                
                // ì¹´ë“œ ê·¸ë¦¬ë“œ ë‹¤ì‹œ ìƒì„± (ì‚¬ìš©ëœ ì¹´ë“œ ìƒíƒœ ë°˜ì˜)
                this.createCardGrid();
                
                document.getElementById('completePolynomial').disabled = true;
            }
            
            checkRoundComplete() {
                // ë¼ìš´ë“œ ìŠ¹ì ê²°ì •
                if (this.player1Score > this.player2Score) {
                    this.player1Wins++;
                } else if (this.player2Score > this.player1Score) {
                    this.player2Wins++;
                }
                
                // ìŠ¹ìˆ˜ ì—…ë°ì´íŠ¸
                document.getElementById('player1Wins').textContent = this.player1Wins;
                document.getElementById('player2Wins').textContent = this.player2Wins;
                
                // ê²Œì„ ì¢…ë£Œ ì¡°ê±´ í™•ì¸ (2ìŠ¹ ë¨¼ì €) ë˜ëŠ” 3ë¼ìš´ë“œ ì™„ë£Œ
                if (this.player1Wins >= 2 || this.player2Wins >= 2 || this.currentRound >= 3) {
                    this.showFinalResult();
                } else {
                    // ë‹¤ìŒ ë¼ìš´ë“œ ë²„íŠ¼ í™œì„±í™”
                    document.getElementById('nextRound').disabled = false;
                }
            }
            
            updateDisplay() {
                const currentPlayerDisplay = document.getElementById('currentPlayerDisplay');
                
                if (this.gamePhase === 'completed') {
                    // ë¼ìš´ë“œ ìŠ¹ì í‘œì‹œ
                    let roundWinner = '';
                    let winnerClass = '';
                    if (this.player1Score > this.player2Score) {
                        roundWinner = 'Player 1 ìŠ¹ë¦¬!';
                        winnerClass = 'bg-blue-500';
                    } else if (this.player2Score > this.player1Score) {
                        roundWinner = 'Player 2 ìŠ¹ë¦¬!';
                        winnerClass = 'bg-red-500';
                    } else {
                        roundWinner = 'ë¬´ìŠ¹ë¶€!';
                        winnerClass = 'bg-purple-500';
                    }
                    currentPlayerDisplay.textContent = roundWinner;
                    currentPlayerDisplay.className = `inline-block px-6 py-3 rounded-full text-white font-bold text-lg ${winnerClass}`;
                } else {
                    currentPlayerDisplay.textContent = `Player ${this.currentPlayer}ì˜ ì°¨ë¡€`;
                    currentPlayerDisplay.className = `inline-block px-6 py-3 rounded-full text-white font-bold text-lg ${this.currentPlayer === 1 ? 'bg-blue-500' : 'bg-red-500'}`;
                }
            }
            
            showFinalResult() {
                const modal = document.getElementById('resultModal');
                const resultContent = document.getElementById('resultContent');
                
                let finalWinner = '';
                let championColor = '';
                let championBg = '';
                
                if (this.player1Wins > this.player2Wins) {
                    finalWinner = 'Player 1ì´ ìµœì¢… ìŠ¹ë¦¬!';
                    championColor = 'text-blue-600';
                    championBg = 'bg-blue-50';
                } else if (this.player2Wins > this.player1Wins) {
                    finalWinner = 'Player 2ê°€ ìµœì¢… ìŠ¹ë¦¬!';
                    championColor = 'text-red-600';
                    championBg = 'bg-red-50';
                } else {
                    finalWinner = 'ìµœì¢… ë¬´ìŠ¹ë¶€!';
                    championColor = 'text-purple-600';
                    championBg = 'bg-purple-50';
                }
                
                resultContent.innerHTML = `
                    <div class="mb-4">
                        <div class="text-6xl mb-4">ğŸ†</div>
                        <h3 class="text-3xl font-bold ${championColor} mb-4">ì¶•í•˜í•©ë‹ˆë‹¤!</h3>
                        <h4 class="text-xl font-bold ${championColor} mb-6">${finalWinner}</h4>
                        
                        <div class="${championBg} p-4 rounded-lg mb-4 border-2 ${this.player1Wins > this.player2Wins ? 'border-blue-200' : this.player2Wins > this.player1Wins ? 'border-red-200' : 'border-purple-200'}">
                            <div class="text-lg font-bold mb-2">ğŸ… ìµœì¢… ìŠ¤ì½”ì–´</div>
                            <div class="flex justify-center space-x-8">
                                <div class="text-center">
                                    <div class="text-blue-600 font-bold">Player 1</div>
                                    <div class="text-2xl font-bold">${this.player1Wins}ìŠ¹</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-red-600 font-bold">Player 2</div>
                                    <div class="text-2xl font-bold">${this.player2Wins}ìŠ¹</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                            <div class="font-bold text-yellow-800 mb-2">ë§ˆì§€ë§‰ ë¼ìš´ë“œ ê²°ê³¼</div>
                            <div class="text-sm space-y-2">
                                <div class="bg-blue-50 p-2 rounded">
                                    <span class="font-bold text-blue-600">Player 1:</span> ${this.formatPolynomial(this.player1Cards)} = ${this.player1Score}ì 
                                </div>
                                <div class="bg-red-50 p-2 rounded">
                                    <span class="font-bold text-red-600">Player 2:</span> ${this.formatPolynomial(this.player2Cards)} = ${this.player2Score}ì 
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                
                const closeBtn = document.getElementById('closeResult');
                closeBtn.textContent = 'í™•ì¸';
                closeBtn.onclick = () => this.closeResult();
            }
            
            nextRound() {
                this.currentRound++;
                // ë¼ìš´ë“œë§ˆë‹¤ ëœë¤í•˜ê²Œ ì‹œì‘ í”Œë ˆì´ì–´ ê²°ì •
                this.currentPlayer = Math.random() < 0.5 ? 1 : 2;
                this.selectedCards = [];
                this.player1Cards = [];
                this.player2Cards = [];
                this.player1Score = 0;
                this.player2Score = 0;
                this.gamePhase = 'selecting';
                // ìƒˆ ë¼ìš´ë“œì—ì„œ ì¹´ë“œ ì´ˆê¸°í™”
                this.usedCardIndices = new Set();
                
                // UI ì—…ë°ì´íŠ¸
                document.getElementById('currentRound').textContent = this.currentRound;
                document.getElementById('player1Score').textContent = '0';
                document.getElementById('player2Score').textContent = '0';
                document.getElementById('player1Polynomial').textContent = 'ë‹¤í•­ì‹ ëŒ€ê¸°ì¤‘...';
                document.getElementById('player2Polynomial').textContent = 'ë‹¤í•­ì‹ ëŒ€ê¸°ì¤‘...';
                document.getElementById('nextRound').disabled = true;
                
                this.resetForNextPlayer();
                this.updateDisplay();
            }
            
            closeResult() {
                const modal = document.getElementById('resultModal');
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
            
            newGame() {
                // ìƒˆ ê²Œì„ ì‹œì‘ ì‹œ ëœë¤í•˜ê²Œ ì‹œì‘ í”Œë ˆì´ì–´ ê²°ì •
                this.currentPlayer = Math.random() < 0.5 ? 1 : 2;
                this.selectedCards = [];
                this.player1Cards = [];
                this.player2Cards = [];
                this.player1Score = 0;
                this.player2Score = 0;
                this.gamePhase = 'selecting';
                this.currentRound = 1;
                this.player1Wins = 0;
                this.player2Wins = 0;
                this.usedCardIndices = new Set();
                
                document.getElementById('currentRound').textContent = '1';
                document.getElementById('player1Wins').textContent = '0';
                document.getElementById('player2Wins').textContent = '0';
                document.getElementById('player1Score').textContent = '0';
                document.getElementById('player2Score').textContent = '0';
                document.getElementById('player1Polynomial').textContent = 'ë‹¤í•­ì‹ ëŒ€ê¸°ì¤‘...';
                document.getElementById('player2Polynomial').textContent = 'ë‹¤í•­ì‹ ëŒ€ê¸°ì¤‘...';
                document.getElementById('nextRound').disabled = true;
                
                this.resetForNextPlayer();
                this.updateDisplay();
                this.closeResult();
            }
            
            bindEvents() {
                document.getElementById('completePolynomial').addEventListener('click', () => this.completePolynomial());
                document.getElementById('nextRound').addEventListener('click', () => this.nextRound());
                document.getElementById('newGame').addEventListener('click', () => this.newGame());
                document.getElementById('closeResult').addEventListener('click', () => this.closeResult());
            }
        }
        
        // ê²Œì„ ì‹œì‘
        document.addEventListener('DOMContentLoaded', () => {
            new PolynomialDuel();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95e76aedc744eab1',t:'MTc1MjM5NTQyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
